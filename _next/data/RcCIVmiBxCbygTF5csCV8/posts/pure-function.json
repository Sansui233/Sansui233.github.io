{"pageProps":{"meta":{"title":"纯函数与算法","date":"2021-09-25 08:00","tags":["算法"],"categories":"学习","description":"自从接触了纯函数，刷算法题刷得举步维艰。","keywords":"纯函数, 算法"},"mdxcode":"\"use strict\";\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = {\n    blockquote: \"blockquote\",\n    code: \"code\",\n    h2: \"h2\",\n    hr: \"hr\",\n    img: \"img\",\n    li: \"li\",\n    p: \"p\",\n    pre: \"pre\",\n    span: \"span\",\n    strong: \"strong\",\n    ul: \"ul\",\n    ...props.components\n  };\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.p, {\n      children: \"自从接触了纯函数，刷算法题刷得举步维艰。\"\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"什么是纯函数：同样的传入参数，一定可以得到相同的输出\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"纯函数又被称为无副作用的函数，不会改变外部的状态。\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"比如在 JS 中，array.slice()对数组的切片，返回的是一个新的数组，为纯函数。\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"相对的，array.splice()对数组的插入与删除是对于原数组操作，不是纯函数。\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"纯函数的意义，在于保证\", _jsx(_components.strong, {\n        children: \"不会对函数外部的状态有隐式的修改\"\n      }), \"。这在大型的、遍地都是状态的系统中非常重要。如果不保证纯函数，多个函数内部去修改了同一外部状态，容易出现意想不到的 Bug。\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"图的邻接矩阵定义\",\n      children: \"图的邻接矩阵定义\"\n    }), \"\\n\", _jsx(_components.img, {\n      src: \"https://raw.githubusercontent.com/NamiLing/upic/master/uPic/g61Yvh.jpg\",\n      alt: \"img\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-ts\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"let\"\n        }), \" map = {\\r\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"point\"\n        }), \": [\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'V0'\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'V1'\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'V2'\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'V3'\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'V4'\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'V5'\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'V6'\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'V7'\"\n        }), \"],\\r\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"side\"\n        }), \": [\\r\\n    [\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \"],\\r\\n    [\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \"],\\r\\n    [\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \"],\\r\\n    [\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \"],\\r\\n    [\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \"],\\r\\n    [\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \"],\\r\\n    [\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \"],\\r\\n    [\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \"],\\r\\n  ]\\r\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"图深度遍历的非纯函数实现\",\n      children: \"图深度遍历的非纯函数实现\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-ts\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// DFS 深度优先遍历，从 第 index 个节点开始. visited 记录已访问的节点，全局共用一个 visited\"\n        }), \"\\r\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"function\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"DFStraverse\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-params\",\n          children: [\"index: \", _jsx(_components.span, {\n            className: \"hljs-built_in\",\n            children: \"number\"\n          }), \" = \", _jsx(_components.span, {\n            className: \"hljs-number\",\n            children: \"0\"\n          }), \", visited = [map.point[\", _jsx(_components.span, {\n            className: \"hljs-number\",\n            children: \"0\"\n          }), \"]]\"]\n        }), \") {\\r\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (visited.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"length\"\n        }), \" === map.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"point\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"length\"\n        }), \") {\\r\\n    \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"console\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"log\"\n        }), \"(visited.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"toString\"\n        }), \"())\\r\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \"\\r\\n  }\\r\\n\\r\\n  map.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"side\"\n        }), \"[index].\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"forEach\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-function\",\n          children: [\"(\", _jsx(_components.span, {\n            className: \"hljs-params\",\n            children: \"isSide, targetv\"\n          }), \") =>\"]\n        }), \" {\\r\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (isSide && !visited.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"includes\"\n        }), \"(map.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"point\"\n        }), \"[targetv])) {\\r\\n      visited.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"push\"\n        }), \"(map.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"point\"\n        }), \"[targetv])\\r\\n      \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"DFStraverse\"\n        }), \"(targetv, visited)\\r\\n    }\\r\\n  })\\r\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"以上代码的问题：\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"map 定义在了外部，和别的函数共用\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"visited 是全局共用同一个，但却每次都要作为参数传入，逻辑上既不合也没有必要。并且作为函数参数（而不是全局变量），每次都对 visited 作了修改。这里还好，因为要的就是修改后的 visited（实际上是全局的 visited）。但如果题目是一个回溯问题，就需要管理 visited 的状态，在修改了之后，递归出栈时还得改回来。\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"图深度遍历的纯函数实现\",\n      children: \"图深度遍历的纯函数实现\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-ts\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// DFS 深度优先遍历，从 第 index 个节点开始. visited 记录已访问的节点，全局共用一个 visited\"\n        }), \"\\r\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 纯函数实现\"\n        }), \"\\r\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"function\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"DFStraverse\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-params\",\n          children: [\"index: \", _jsx(_components.span, {\n            className: \"hljs-built_in\",\n            children: \"number\"\n          }), \", map: { point: \", _jsx(_components.span, {\n            className: \"hljs-built_in\",\n            children: \"string\"\n          }), \"[], side: \", _jsx(_components.span, {\n            className: \"hljs-built_in\",\n            children: \"number\"\n          }), \"[][] }\"]\n        }), \") {\\r\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" visited = [map.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"point\"\n        }), \"[index]]\\r\\n\\r\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"function\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"traverse\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-params\",\n          children: [\"index: \", _jsx(_components.span, {\n            className: \"hljs-built_in\",\n            children: \"number\"\n          })]\n        }), \") {\\r\\n    \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 终止条件\"\n        }), \"\\r\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (visited.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"length\"\n        }), \" === map.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"point\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"length\"\n        }), \") {\\r\\n      \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"console\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"log\"\n        }), \"(visited.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"toString\"\n        }), \"())\\r\\n      \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \"\\r\\n    }\\r\\n\\r\\n    map.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"side\"\n        }), \"[index].\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"forEach\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-function\",\n          children: [\"(\", _jsx(_components.span, {\n            className: \"hljs-params\",\n            children: \"isSide, targetv\"\n          }), \") =>\"]\n        }), \" {\\r\\n      \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (isSide && !visited.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"includes\"\n        }), \"(map.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"point\"\n        }), \"[targetv])) {\\r\\n        visited.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"push\"\n        }), \"(map.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"point\"\n        }), \"[targetv])\\r\\n        \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"traverse\"\n        }), \"(targetv)\\r\\n      }\\r\\n    })\\r\\n  }\\r\\n\\r\\n  \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"traverse\"\n        }), \"(index)\\r\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"使用闭包，把共用的 visited 固定为状态。内部再定义函数作递归。 map 也作为外层的参数传入，里面不去修改。\"\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.p, {\n      children: \"状态其实在各种算法里挺重要的。不少空间换时间的极限操作都要用到。\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"算法注定是“不纯”的，能做的也不过是用闭包来保存状态。有时候觉得，纯不纯的也没有这么重要。\"\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = props.components || ({});\n  return MDXLayout ? _jsx(MDXLayout, {\n    ...props,\n    children: _jsx(_createMdxContent, {\n      ...props\n    })\n  }) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","excerpt":" 自从接触了纯函数，刷算法题刷得举步维艰。  > 什么是纯函数：同样的传入参数，一定可以得到相同的输出  纯函数又被称为无副作用的函数，不会改变外部的状态。  比如在 JS 中，array.slice()对数组的切片，返回的是一个新的数组，为纯函数。  相对的，array.splice(","prevPost":{"title":"PPT母版的制作与使用方法","link":"/posts/PPT母版的制作与使用方法"},"nextPost":{"title":"Github hosts 更新脚本(MAC)","link":"/posts/github-hosttools"},"headings":[{"title":"图的邻接矩阵定义","rank":1,"id":"图的邻接矩阵定义"},{"title":"图深度遍历的非纯函数实现","rank":1,"id":"图深度遍历的非纯函数实现"},{"title":"图深度遍历的纯函数实现","rank":1,"id":"图深度遍历的纯函数实现"}]},"__N_SSG":true}