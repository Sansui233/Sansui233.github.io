const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/searchbox-Cmp4Vdsk.js","assets/chunk-JMJ3UQ3L-BVFOw7ai.js","assets/use-search-CGJ_0Tiw.js","assets/throttle-DwQFwEus.js","assets/i18nInstance-DPKwMV5N.js"])))=>i.map(i=>d[i]);
import{c as M,u as W,_ as Q,t as U}from"./throttle-DwQFwEus.js";import{a as s,p as e,y as L,q as Z,x as J}from"./chunk-JMJ3UQ3L-BVFOw7ai.js";import{s as S}from"./i18nInstance-DPKwMV5N.js";import{u as K,S as X}from"./use-appstate-wXf1X0hJ.js";const ee=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],te=M("chevron-down",ee);const se=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],ae=M("github",se);const ne=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],oe=M("mail",ne);const re=[["path",{d:"M4 11a9 9 0 0 1 9 9",key:"pv89mb"}],["path",{d:"M4 4a16 16 0 0 1 16 16",key:"k0647b"}],["circle",{cx:"5",cy:"19",r:"1",key:"bfqh0e"}]],ie=M("rss",re),ce=t=>s.createElement("svg",{fill:"currentColor",id:"flat-neko",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 72 72",...t},s.createElement("path",{d:"m68.24,44.97c.54-.13.86-.68.73-1.21m0,0c-.13-.54-.68-.86-1.21-.73l-4.61,1.15c1.06-5.18.9-11.77-1.14-20.18,0-7-1.45-14.23-3.24-14.91-1.99-.75-11.76,5.91-12.76,8.91-7-2-13-2-20,0-1-3-10.77-9.66-12.76-8.91-1.79.67-3.24,7.91-3.24,14.91-2.05,8.41-2.2,15-1.14,20.18l-4.61-1.15c-.54-.13-1.08.19-1.21.73-.13.54.19,1.08.73,1.21l5.64,1.41c.33,1.14.72,2.21,1.18,3.2l-4.67.42c-.55.05-.96.54-.91,1.09.05.52.48.91,1,.91.03,0,.06,0,.09,0l5.49-.5c.44.75.92,1.46,1.42,2.11l-4.32,1.44c-.52.17-.81.74-.63,1.26.14.42.53.68.95.68.1,0,.21-.02.32-.05l5.08-1.69c6.8,7.11,17.32,7.75,21.6,7.75s14.8-.63,21.6-7.75l5.08,1.69c.11.04.21.05.32.05.42,0,.81-.26.95-.68.17-.52-.11-1.09-.63-1.26l-4.32-1.44c.51-.66.98-1.36,1.42-2.11l5.49.5s.06,0,.09,0c.51,0,.95-.39,1-.91.05-.55-.36-1.04-.91-1.09l-4.67-.42c.45-.99.84-2.06,1.18-3.2l5.64-1.41m-47.24,1.03c-5-1-7-5-6-10,.81-4.04,4.59-7.63,9-7,4.39.63,6.81,4.04,6.64,8.74-.18,4.98-4.64,9.26-9.64,8.26Zm21.45,1.28c-.64.32-1.36.48-2.09.48-.67,0-1.36-.14-2.01-.41-.94-.39-1.74-1.01-2.35-1.83-.61.81-1.41,1.44-2.35,1.83-1.37.57-2.87.54-4.1-.07-.49-.25-.69-.85-.45-1.34.25-.49.85-.69,1.34-.45.7.35,1.61.36,2.44.02,1.01-.42,1.78-1.28,2.16-2.44.03-.09.08-.17.13-.25-.7-.31-1.18-1.01-1.18-1.82,0-1.1.9-2,2-2s2,.9,2,2c0,.81-.49,1.51-1.18,1.82.05.08.1.16.13.25.38,1.15,1.15,2.02,2.16,2.44.83.34,1.74.34,2.44-.02.49-.25,1.09-.05,1.34.45s.05,1.09-.45,1.34Zm8.55-1.28c-5,1-9.46-3.28-9.64-8.26-.17-4.71,2.25-8.11,6.64-8.74,4.41-.63,8.19,2.96,9,7,1,5-1,9-6,10Z"}),s.createElement("path",{d:"m26,33c-.55,0-1-.45-1-1,0-.45.3-.81.7-.94-.16-.09-.32-.19-.5-.25-2.2-.81-5.2.19-6.82,3.53-1.6,3.29-1.17,7.39,2.48,8.79,3.31,1.27,7.01-.77,7.53-4.63.35-2.62-.16-4.96-1.41-6.41-.04.51-.46.92-.98.92Z"}),s.createElement("path",{d:"m53.62,34.34c-.45-.93-1.02-1.66-1.64-2.24-.05.51-.46.9-.98.9-.55,0-1-.45-1-1,0-.4.24-.74.57-.9-1.27-.63-2.63-.72-3.78-.3-2.52.92-3.68,4.05-3.19,7.69.52,3.85,4.23,5.9,7.53,4.63,3.64-1.4,4.07-5.49,2.48-8.79Z"})),F=({width:t="1rem",height:a="1rem",isClose:o,isCloseToggler:c,className:r=""})=>{const d="h-[2px] w-full rounded-sm bg-text-primary transition-all duration-300 ease-in-out";return e.jsxs("div",{className:`flex flex-col justify-between cursor-pointer ${r}`,style:{width:t,height:a},onClick:c,"aria-expanded":o,"aria-label":"Toggle menu",children:[e.jsx("div",{className:`${d} ${o?"opacity-0":"opacity-100"}`}),e.jsxs("div",{className:"relative h-0.5 w-full",children:[e.jsx("div",{className:`absolute top-0 left-0 ${d} ${o?"rotate-45":"rotate-0"}`}),e.jsx("div",{className:`absolute top-0 left-0 ${d} ${o?"-rotate-45":"rotate-0"}`})]}),e.jsx("div",{className:`${d} ${o?"opacity-0":"opacity-100"}`})]})};function le(){const t=K(),[a,o]=s.useState(()=>typeof window<"u"?localStorage.getItem("theme")||"system":(t.setTheme("system"),"system"));return s.useEffect(()=>{const c=window.document.documentElement,r=window.matchMedia("(prefers-color-scheme: dark)"),d=m=>{if(c.classList.remove("light","dark"),a==="system"){const i=m?"dark":"light";c.classList.add(i),t.setTheme(i)}else c.classList.add(a),t.setTheme(a)};if(d(r.matches),localStorage.setItem("theme",a),a==="system"){const m=i=>{d(i.matches)};return r.addEventListener("change",m),()=>r.removeEventListener("change",m)}},[a]),{theme:a,setTheme:o}}function de({isShow:t,toggle:a}){const{theme:o,setTheme:c}=le(),{t:r}=W();function d(){c(o==="system"?"dark":o==="dark"?"light":"system")}const m=s.useMemo(()=>r(o==="system"?"ui.themeSystem":o==="dark"?"ui.themeDark":"ui.themeLight"),[o,r]),i=y=>`
    transition-all duration-1000 ease-out transform
    ${y}
    ${t?"opacity-100 translate-y-0":"opacity-0 -translate-y-8"}
  `;return e.jsxs("section",{className:`bg-bg/90 fixed inset-0 z-8 h-full w-full overflow-auto backdrop-blur-[6px] transition-all duration-500 ease-[cubic-bezier(0.46,0,0.08,1.11)] ${t?"pointer-events-auto opacity-100":"pointer-events-none opacity-0"} `,children:[e.jsxs("div",{className:"relative mx-auto pt-32 pb-23 text-center font-bold",children:[e.jsx("h1",{className:`${i("delay-0")}`,children:e.jsxs("span",{className:"relative inline-block",children:[r("ui.blogTitle",{author:S.author.toUpperCase()}),e.jsx("span",{className:"bg-accent-hover absolute bottom-0 left-0 -z-10 h-[0.5em] w-full rounded-[0.5em] mix-blend-overlay"})]})}),e.jsx("div",{className:`mt-8 ${i("delay-100")}`,onClick:d,children:e.jsx(P,{children:m})}),e.jsx("div",{className:`mt-4 ${i("delay-200")}`,children:e.jsx(P,{children:e.jsx(L,{to:"/categories",children:r("ui.categoriesTags")})})}),e.jsx("div",{className:`mt-4 ${i("delay-300")}`,children:e.jsx(P,{children:e.jsx("a",{href:"/atom.xml",children:r("ui.rss")})})}),e.jsxs("div",{className:`pt-12 text-[10px] font-normal ${i("delay-400")}`,children:[e.jsxs("div",{className:"my-4 flex items-center justify-center",children:[e.jsx(D,{href:S.social.github,children:e.jsx(ae,{})}),e.jsx(D,{href:`mailto:${S.social.email}`,children:e.jsx(oe,{})}),e.jsx(D,{href:"/rss",children:e.jsx(ie,{})})]}),e.jsxs("div",{className:"mx-auto my-4 leading-relaxed",children:[r("ui.copyright",{author:S.author,year:new Date().getFullYear()}),e.jsx("br",{}),r("ui.allRightsReserved")]})]})]}),e.jsx("div",{className:"fixed top-5.5 right-5 z-5 h-5 w-6",children:e.jsx(F,{isClose:!0,isCloseToggler:a})})]})}const P=({children:t})=>e.jsx("span",{className:"hover:text-accent-hover relative inline-block cursor-pointer text-[1.625rem] leading-11 transition-transform duration-300 ease-out hover:scale-110",children:t}),D=({href:t,children:a})=>e.jsx("a",{href:t,className:"text-text-primary hover:text-accent-hover mx-1 transition-colors [&>svg]:h-6 [&>svg]:w-6",target:"_blank",rel:"noopener noreferrer",children:a}),G=()=>Q(()=>import("./searchbox-Cmp4Vdsk.js"),__vite__mapDeps([0,1,2,3,4])),ue=s.lazy(G);function ve({placeHolder:t=!0,scrollElem:a,hideSearch:o,className:c,...r}){const[d,m]=s.useState(!1),[i,y]=s.useState(!1),[v,b]=s.useState(!1),[f,E]=s.useState(!1),_=Z(),j=s.useRef(null),{t:u}=W();s.useEffect(()=>{G()},[]),s.useEffect(()=>{const p=a||globalThis,n=()=>a&&a instanceof HTMLElement?a.scrollTop:globalThis.scrollY;let l=n();const g=U(()=>{if(n()<200){m(!1),l=n();return}const N=n()-l;N>10?(m(!0),l=n()):N<-10&&(m(!1),l=n())},100);return p.addEventListener("scroll",g),()=>{p.removeEventListener("scroll",g)}},[a]);const k=()=>{y(!i)},q=()=>{b(!v)},T=p=>{b(p)},x=_.pathname,h=x==="/"||x.startsWith("/posts"),w=x==="/memos"||x.startsWith("/memos"),I=x==="/about"||x.startsWith("/about"),R=()=>h?u("ui.posts"):w?u("ui.memos"):I?u("ui.about"):"";return e.jsxs(e.Fragment,{children:[e.jsx(s.Suspense,{fallback:null,children:e.jsx(ue,{outSetSearch:T,outIsShow:v,iconEle:j})}),e.jsx(de,{isShow:i,toggle:k}),e.jsxs("header",{className:`bg-bg/60 fixed z-10 box-content flex h-15.75 w-full items-center justify-between backdrop-blur-[6px] transition-transform duration-500 ease-out ${d?"-translate-y-full":"translate-y-0"} `+(c?` ${c}`:""),...r,children:[e.jsx("div",{className:"w-52.5 flex-auto items-center justify-start font-semibold max-md:w-25",children:e.jsxs(L,{to:"/",className:"flex items-center px-4",children:[e.jsx(ce,{width:36,className:"shrink-0"}),e.jsx("span",{className:"px-2 max-md:hidden",children:u("ui.blogTitle",{author:S.author})})]})}),e.jsx(me,{}),e.jsxs("div",{className:"flex w-52.5 flex-auto items-center justify-end max-md:w-25 [&>div]:mr-4",children:[e.jsxs("div",{className:"relative min-w-14.25 text-xl font-semibold min-[580px]:hidden",children:[e.jsxs("div",{className:`absolute -top-2 left-0 w-full pt-10 transition-all duration-300 ${f?"border-ui-line-gray-3 bg-bg visible rounded-lg border shadow-md":"invisible border-transparent"} `,children:[!h&&e.jsx(B,{to:"/",isOpen:f,isFirst:!0,children:u("ui.posts")}),!w&&e.jsx(B,{to:"/memos",isOpen:f,children:u("ui.memos")}),!I&&e.jsx(B,{to:"/about",isOpen:f,children:u("ui.about")})]}),e.jsxs("button",{className:"text-text-primary relative flex items-center px-3",onClick:()=>E(p=>!p),children:[R(),e.jsx(te,{size:"1.25em",className:"-mr-2"})]})]}),e.jsx("div",{ref:j,onClick:()=>o?null:q(),className:`cursor-pointer transition-colors duration-300 ${o?"hidden":""} ${v?"text-accent":""} hover:text-accent-hover`,children:e.jsx(X,{})}),e.jsx("div",{onClick:k,className:"mr-5 w-5.5",children:e.jsx(F,{width:"100%",height:"1.15rem",isClose:i})})]})]}),t&&e.jsx("div",{className:"text-accent h-15.75 w-full pt-2.5 text-center font-serif text-[10px] italic opacity-60",children:"人活着就是为了卡卡西"})]})}const O=[{href:"/",pathMatch:t=>t==="/"||t.startsWith("/posts")},{href:"/memos",pathMatch:t=>t==="/memos"||t.startsWith("/memos")},{href:"/about",pathMatch:t=>t==="/about"||t.startsWith("/about")}];function me(){const{t}=W(),a=Z(),o=J(),c=s.useRef(null),r=s.useRef([]),[d,m]=s.useState({opacity:0}),[i,y]=s.useState({opacity:0}),[v,b]=s.useState(null),[f,E]=s.useState(!1),[_,j]=s.useState(!1),u=s.useRef(-1),k=O.findIndex(n=>n.pathMatch(a.pathname)),T=(()=>{if(o.state==="loading"&&o.location){const n=o.location.pathname;return O.findIndex(l=>l.pathMatch(n))}return-1})(),x=o.state==="loading"&&T>=0,h=v!==null?v:x?T:k,w=(n,l=!0)=>{const g=r.current[n],N=c.current;if(!g||!N)return;const V=N.getBoundingClientRect(),A=g.getBoundingClientRect(),$=A.left-V.left,z=A.width,C=u.current>=0&&u.current<n?"right":u.current>=0&&u.current>n?"left":null;l&&C&&(j(!0),setTimeout(()=>j(!1),500));const H=6,Y=C==="right"?$+z-H:C==="left"?$:$+z/2-H/2;y({left:Y,opacity:1,transition:l?"left 0.35s ease-out, opacity 0.15s":"none"}),m({left:$,width:z,opacity:1,transition:l?"left 0.7s cubic-bezier(0.7, 0, 0.2, 1), width 0.3s ease-out":"none"}),u.current=n};s.useEffect(()=>{E(!0)},[]),s.useLayoutEffect(()=>{h>=0&&f&&w(h,f)},[h,f]);const I=n=>{n!==v&&b(n)},R=()=>{b(null)};s.useEffect(()=>{const n=()=>{h>=0&&w(h,!1)};return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[h]);const p=[t("ui.posts"),t("ui.memos"),t("ui.about")];return e.jsxs("nav",{ref:c,className:"relative flex max-w-[50%] flex-[2_1_auto] items-center justify-evenly tracking-wide max-[580px]:hidden min-[580px]:max-w-97.5",onMouseLeave:R,children:[h>=0&&e.jsx("div",{className:"bg-accent-hover pointer-events-none absolute top-[1.1em] -z-10 h-[0.4em] w-[0.4em] rounded-full",style:{...i,opacity:_?1:0}}),h>=0&&e.jsx("div",{className:`bg-accent-hover pointer-events-none absolute top-[1.1em] -z-10 h-[0.4em] rounded-[0.5em] ${x?"animate-nav-indicator-blink":""}`,style:d}),O.map((n,l)=>e.jsx("div",{className:"px-2 pt-0.5 font-semibold",onMouseEnter:()=>I(l),children:e.jsx(L,{ref:g=>{r.current[l]=g},to:n.href,className:`hover:text-accent relative transition-colors duration-300 ${h===l?"text-text-primary":""}`,children:p[l]})},n.href))]})}function B({to:t,isOpen:a,isFirst:o,children:c}){return e.jsx(L,{to:t,className:`text-text-secondary my-2 block px-1 pb-1 pl-2.75 transition-all duration-500 ${a?"blur-0 opacity-100":"pointer-events-none opacity-0 blur-md"} `,children:c})}export{ae as G,oe as M,ie as R,ve as T};
