[{"id":"2022-06-10","content":"\n开始看 Rust，教程里把原理解释得很多，但是经过了 C++、Java、Go、Javascript、Typescript、Python 的大混杂折腾后，觉得也还行，设计模式倒是都能理解。学 JS 的时候才是真的痛苦……\n\n不过为什么要看 Rust 啊……还是馋性能，还有 wasm。最近还看上了 Tauri，前端是系统 webUI，后端是 rust，希望能代替 Electron。我在 SNS 上万年骂 Electron，还得做表情包才能表达我的不满。\n\n\n其实我也是希望技术稳定好，最好有一个东西可以一直用，还能一直走在时代的前沿满足各种需求。Go 已经可以满足我大部分的需要了，简洁高效跨平台……除了 UI。我为什么不会写 UI 的轮子啊啊啊啊！！track 全平台的 native UI，大概只能是咕鸽那种自己写引擎了……\n\n现在 webview 大概是跨平台 UI 的最通用方案了，终于不用各写各的了（Unity：？）。只是 JS 的消耗实在太过于感人，所以我真的讨厌 Electron。Tauri 在运行时占用也不太理想，特别是写小工具的场景，启动下 Tarui Server 至少也是 80M……但比 Electron 动不动就半个 G 好啊！\n\n查了一下，真有 Unity 写 App 的……别了别了，现在有 Flutter 了。虽然 web 开发者还蛮希望靠出身 web 的虚拟 DOM 一统天下的，但造轮子在现在真的是用爱发电吧……\n\n","tags":[],"imgsmd":["![Memo](https://cdn.jsdelivr.net/gh/NamiLing/upic/uPic/i-hate-electron.jpg)"],"sourceFile":"001.md","csrIndex":[10,0]},{"id":"2022-06-09","content":"\n其实真的有一些东西可以写出来分享，但一想到好像是没有读者，都是写给自己看的，而自己本来就记了笔记，就没有什么分享的动力了。加之学业和工作和家庭让人没有摸鱼的心情。\n\n前天晚上回家发现父母用的 win7 老电脑又被装了 360 全家桶，然后给重装了。但当时踩了一堆坑，到最后 N 卡驱动装不上，5 点才睡觉。第二天 8 点又起来继续看 N 卡驱动怎么回事……是神经质一样的强迫症，没有做完当天的计划的事情会无法睡觉，这样常常会因为精力不足而更加糟糕。\n\n不过我确实是很久没有用过 win 系统了，很多东西现查，麻烦的地方出在这次是 win7 重装成 win10，没有想到固件要求还有差别。开始为了方便用了微 PE，硬盘居然没给自动格式化成 GPT（也可能格式化失败了但没提示），结果一直卡在引导之前转圈。后面还是做了直装的外接 U 盘。装完后就是显卡一直是通用老驱动，N 卡驱动用了网上能查到的所有的方式都装不上。最后才在一个油管视频里发现是因为 win10 是早期的内测版（MSDN 上不带任何后缀的 win10 居然是内测版……），新驱动不支持。但是 Nvidia 的驱动页面上没有写 win10 版本号要求，我还刻意看了这个的……于是又重下新版重装了一遍……新版还是挺好的 DCH 版驱动会自动更新。但据说游戏玩家很烦这个因为是更新可能是负优化……\n\n话说其实我妈不怎么用电脑，整天还是看手机新闻短视频。我爸倒是电脑用得比手机多，不过大多是专业软件，偶尔也会看新闻，是那种能不更新就不更新、稳定最重要、首页一定要设成 2345 导航的老网民，不然怎么老装上 360 全家桶。\n\n导航页虽然被称为是上个时代的产物，但个人觉得不可能完全消失。在对互联网完全不了解的情况下，导航就是了解互联网应用的最好、最快的方式。制作导航的本质是信息分类，这算是一个非常重要的学习能力，放到其它的网站、领域也是适用的。\n\n今天也发现了一些优质的小工具箱页面，不得不说使用当下最好的搜索引擎搜索出来的工具，也没有人为编排后的小站工具质量好。唯一的问题就是太难找了。搜索引擎找到的工具大多要么太老太丑，要么广告，要么要钱。现代前端发展还没几年，好用的小工具太新了，大多由个人运营，JS 框架的 SEO 也差。\n\n相应解决方法也有，还是社区化，持续运营保持住社区的热度和排名。因为现在大家对于“工具类应用”的概念还停留在原生 App，要想推广 Web App 目前不是技术问题，而是扭转对大家对网页的印象。有多少人知道美图秀秀还有个网页版，不用装什么软件，日常用户可以在浏览器里给照片调色、做简单海报、拼图。格式转换也不需要格式工场，相关的在线工具好用无广告又免费的相当多。我也知道有这些东西，但每次我还是会本能的打开 Photoshop，尽管知道是大材小用。\n\n我接触过做得最好的工具社区算是捷径社区，但也差不多死掉了，一旦开始有社区与内容推荐，审核就是逃不开的大麻烦。\n\n然后，中午搬东西出了一身汗，下午晚上浑身发冷肚子疼，简直不能再没精神了。上次出现这种情况还是我毕业的时候，当时只睡了 4 个小时，上午 7 点起来拍毕业照到中午，眼睛都是闭着的。中午开始不舒服到拉肚子，睡了 3 个小时后好了。\n\n","tags":[],"imgsmd":[],"sourceFile":"001.md","csrIndex":[10,1]},{"id":"2022-06-06","content":"\n喜欢白纸一样的东西，比如洁白无瑕的瓷砖，白纸黑字的书籍，电子屏幕与排版也喜欢有白纸印刷的感觉，比如 iPad 上的微信读书。“白纸”的不只是色彩上的简单，更多是排版上考究，细说内容就有些多了。电脑上白底黑字的网页也一样。每每感觉页面不像白纸了，大概率是屏幕又花了，我会用酒精擦屏幕，擦到屏幕重新成为白纸。\n\n------\n\n脑子要炸了，作为一个偏工程型的 INTP（F 多还是 T 多看情况），全家都是 NT 型，但是专业又互不了解八竿子打不着，只能用最最抽象的语言去描述各自的专业问题，根本具体不下去，吵一两个小时还是没什么用。\n\n至于什么是偏工程型的 INTP，这算是个人用词，大致是说：INTP 会从抽象（而非具象）的角度思考/总结问题，善于寻找不同事物之间的共同抽象关系（Ne+Ti 特质）。有的 INTP 可以直接通过抽象推断抽象，直观例子是数学定理证明，大家对 INTP 的印象可能也是这类。但实际上，有的 INTP 难以从抽象再次推断抽象，而更善于从不同具体事物中总结出同一抽象规律，直观例子比如面向对象的系统设计，像是热衷于研究设计模式的一群人，我个人把此类 INTP 称为工程型 INTP。 INTP 之间出现这种差异，个人认为主要是第三功能和劣势功能造成的（没有说别的功能没有影响的意思）。\n\nNT 的特质大概是全家唯一的共同点了，只有在 NT 方面吵架才会发现自己好像是亲生的。\n\n","tags":[],"imgsmd":[],"sourceFile":"001.md","csrIndex":[10,2]},{"id":"2022-05-28","content":"\n今日读文章笔记\n\n- [是否测试私有方法？](https://jesseduffield.com/Testing-Private-Methods/) 看完之后我的观点是不测试私有方法。如果需要测试私有方法，那说明着类设计得太复杂，违反了单一责任原则。\n\n- [前端部署 15 章](https://q.shanyue.tech/deploy/)，适合没有实践过的新手看，都是教怎么搬砖，换言之是查文档的经验积累，对我个人来说没什么收获。好的地方是还有很多的面试题可以看。毕竟这两年闲得我差不多把有需求也有条件的折腾的东西全折腾了个遍，这之后才能体会到折腾真的不重要，工程的终点是个设计问题，而设计是个哲学问题 ……哦，对于找工作还是重要的，只有想法没有动手能力也不行。\n\n- 还有人吐槽 [python3 的类型标注](https://neverworkintheory.org/2022/03/18/python-3-types-in-the-wild.html) 。没有类型标注我不理解，这么喜欢**面向记忆/面向文档编程**吗？\n\n- [iconmap.io 分析 favicon 的统计数据](https://iconmap.io/blog)，还蛮有趣的。\n\n- [Jamstack](https://jamstack.org/) 可以了解到一些当下的流行 Web 技术栈，比如 Headless CMS。我觉得后面那些本质上还是 CURD 那一套，只是换成了前端能直接用的 API，抢一下后端 CURD 搬砖人员的工作可还行。不过服务解耦带来了无代码可能性非常棒，但也真的不一定有好的应用场景。并且动态内容的SEO 还是问题很大，必须 SSR 渲染。\n\n- [关于设计模式的介绍大全](https://refactoringguru.cn/design-patterns/catalog)，这个算后端面试必备吧，前端我没见几个人问过，本质也算是哲学♂\n\n- ORM：GraphQL 是一个 API 标准，不用 SQL 进行 CURD。为什么好像近几年的前端对 CURD 这么执着啊，我对这就是库能用，高效，好用，就行了。不过出标准倒也有出标准的好处，服务能分层就是依靠着各种标准联系。\n\n- 低代码 电商平台： https://selldone.com/\n\n- [为什么需要黑暗模式](https://www.bramadams.dev/projects/invest-in-lights#light-mode-and-dark-mode-on-websites)？觉得不需要设计黑暗模式的人，大概是工作环境都太稳定了。\n\n  > I generally clowned on developers putting so much into building dark modes instead of critical features that prevent their apps from working, until I was working on this site on a red eye flight. The whites were blinding and the websites/apps that had dark mode were comforting.\n\n- [完美的可访问性网站](https://www.matuzo.at/blog/building-the-most-inaccessible-site-possible-with-a-perfect-lighthouse-score/) 笑死了，行为艺术\n\n突然觉得，没太多意思，大家只是在不断追求更好更方便的架构，以适应商业的发展。做的事情还都是这点东西。好的工程师太难了，需要极强的抽象思维，某种程度上可以说是需要哲学天赋。所以到后期不转管理或不做研究几乎不可能……\n\n","tags":[],"imgsmd":[],"sourceFile":"001.md","csrIndex":[10,3]},{"id":"2022-05-26","content":"\n推荐一个网页版[图片处理 app](https://imagestool.com/zh_CN/)，目前最全的没有之一。\n\n------\n\n前天看完了博人转主线，导致昨天开始没有火影主线看了，于是莫名 emo。emo 了就摸了两张鱼，反而比平时睡得早一点。\n\n\n\n","tags":[],"imgsmd":["![2022-05-26-2](https://cdn.jsdelivr.net/gh/NamiLing/upic/uPic/2022-05-26-2.jpg)","![2022-05-26-1](https://cdn.jsdelivr.net/gh/NamiLing/upic/uPic/2022-05-26-1.jpg)"],"sourceFile":"001.md","csrIndex":[10,4]},{"id":"2022-05-25","content":"\n今天实现动画 Mount when scroll into view port，用了一个特别简单有意思的方式做了首屏列表 trail 渲染，通俗说就是元素依次显示出来，每一条有点时间差。\n\n挂载动画还是用的 css animation，主要是 css 做挂载动画还是很好写的，效率也比 JS 高。重点是在如何给元素的挂载加上时间差。我在这里没有用任何 setTimeout 一类的控制时间的方式。\n\n做 scroll into viewport 要用到 [Intersection Observer API](https://developer.mozilla.org/zh-CN/docs/Web/API/Intersection_Observer_API)，但如果仅仅是判断 scroll into view 再进行挂载，尽管后续元素的是按动画依次挂载上来的，但首屏的各个条目仍然是一起出现的，没有任何时间差。于是我将 List Item 的占位高度设置为 100vh, 第一个就能挤掉所有后续元素，挂载后回归正常高度，第二个元素进入 viewport；第二个元素高度仍为 100vh，同样挤掉后续的所有元素，挂载后回归正常高度。\n\n这样挂载的时间差其实是取决于 JS 修改 height 的时长和浏览器重绘所花费的时间，并非人为可控的。如果不做任何处理，时间差将是非常短的。不过自己实测后感觉已经够用了。\n\n最烦的其实是 SEO，如果真的 mount on scroll 算是懒加载了，会直接没首屏……所以要兼顾首屏数据只能采用 改 display 或者 visibility 的动画方式，而不是 mount on scroll.\n\n","tags":[],"imgsmd":[],"sourceFile":"001.md","csrIndex":[10,5]},{"id":"2022-05-24","content":"\n今天看 react-spring 的标注，发现几乎读不懂。于是去学习了更多有关 typescript 标注的知识，主要是 extends 和 infer。\n\n看了只有一个感觉：有必要引入如此复杂的编程模式吗！我看标注一般都是因为懒得看文档，认为最容易让人从根本上理解设计原理的文档就是代码本身。但第一次遇到读起来如此困难的标注。实在不知道把类型搞成变量做判断这一套的意义在哪…… 确实可以简化一些代码，但也真的引入了复杂亿点的编程模式。可能还是写库会用到，平时倒没有这个需求。而且由于 function 也是 object 的关系，extends 接箭头函数太难断句了，真的难受，断句断到我哭。算了箭头函数本来就是一个复杂场景下视觉上极难断句的语法……\n\n","tags":[],"imgsmd":[],"sourceFile":"001.md","csrIndex":[10,6]},{"id":"2022-05-22","content":"\n2022-05-26 更新：我焯，我服了，兄弟们，是不是微信办公人群都用是不会写长文的啊！又是这位……如果你无意间也看到了这里，希望你能去看一下[提问的智慧](https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md)，可以说你算是条条踩雷。我也不是什么厉害的人物，所以不要叫我大佬，这并不能取悦到谁。我回答问题仅仅是出于分享的心情，愉快的问答是聚焦于技术问题本身的平等交流。\n\n------\n\n我讨厌上来就给我说：“我不是这种情况，所以你说的情况不存在”的人，把自己的认知当做全部。这已经不是有没有共情能力的问题，是对于世间的多样性已经丧失掉了求知欲与敬畏之心。\n\n我从前也是这样的人，当时我觉得写个 json 结构转换代码真的特别简单，不认为这个学校里会有人写一整天都不会，一起做大作业的室友不会写我还硬要她写。最后她没办法，求另一个室友用一个小时帮她搞定了。现在我都很后悔这个事，意识到人和人之间的天赋点可能真的差很远时，是在有些理解“艺术”而非“画画技术”之后。在没有人文素养的时候我是真的可怕，可能是那种 pua 人，尽管不是故意 pua，仅仅是觉得“我自己做真的觉得超简单的，你为什么不行”。\n\n当提出意见时：\n\n（可以接受）我知道可能有很多情况，但我觉得是这样比较好，原因是（一系列客观事实）\n\n（不能接受）我觉得是这样比较好，因为我的经验中没有别的情况\n\n后者如果天天接触，我又无法对他直言，那么之后那个人会触发我 PTSD 的，亲测有效。\n\n------\n\n服了，头一回遇到 issue be like:\n\nQ：我出现了 A 问题\n\n我: 我明白了，请告知你的运行环境信息，因为我这里无法复现，\n\nQ：可我出现了 A 问题啊\n\n我：你能先把你的环境信息告诉我吗？否则我无法复现\n\nQ：环境是 xxx，希望快点修谢谢\n\n我：已测试，并非此项目的问题，是其它地方的问题，你可以用以下步骤检查哪里出问题……\n\nQ：可我就是出了A问题呀\n\n我：你能先把每个步骤的检查结果告诉我吗？\n\n…………(*$^#(^(^@%_这他喵的，总是重复自己的问题不按回复查原因有意思吗？还是说我说的不够明确他不知道自己需要干什么？而且我在开头就很想说，这种问题一看就是自己魔改过其他地方导致的，我还自己去复现环境只是个以防万一，要不是出于礼貌我立刻当街踢皮球。\n\n没事，很幸运，这么久了这才头一回当客服。\n\n","tags":[],"imgsmd":[],"sourceFile":"001.md","csrIndex":[10,7]},{"id":"2022-05-21","content":"\n博客重构记录：由于吐槽写得太长加了 memo 分页逻辑，使用了首屏静态页面分页前端 query CSR 的方式，以减少 FCP 时间。但这样的问题是即便是带 query 的链接，首屏也是会要先闪一下，再替换掉内容，毕竟是静态页面。 这有点难解决。\n\n有一个非常 tricky 的办法，在样式做上欺骗，把字号换成和背景一个色（或者加遮罩），在 CSR 逻辑处理完后再显示。但这样的弊端是 FCP 时间会相对比较长，特别是网不好的情况下。本来分页就是用来减少 FCP 时间的。这么做虽然流量减少了，但又很难说到底能减少多少 FCP 时间。\n\n另外 Link 由于路由处理有延迟，导致换页时体感有延迟，中途没反馈如果网不好可能会以为是页面有 Bug。果然 CSR 异步请求还是得加数据切换时的交互提示……啊烦，设计好难。后续还想抠动画，但就是体力活，纯抠……\n\n","tags":[],"imgsmd":[],"sourceFile":"001.md","csrIndex":[10,8]},{"id":"2022-05-20","content":"\n关于 Next.js 的容易造成的误区和目前吸引我的点。先说误区。\n\n1. SSG（静态站点生成）这名字取得有误导性，并不是真正完全的静态站点。\n\n一般对于 **静态站点** 是指 build 预渲染后的纯前端页面，直接出现最终结果，不需要任何服务器，给一个 index.html 点开就能用。但 SSG 实际做的只有 “可以获取预渲染所需数据”，但有的渲染 Feature 仍然需要用到服务器处理，其 build 结果并不是静态站点，也没有做任何预渲染，export 才是。因此即便没有用到任何的 SSR，也会有 feature 在 export 中不支持。纯 React 客户端的 build 阶段相当于 Next.js 的 export 阶段。\n\n1. SSR（服务端渲染）字面上更容易造成误解，和传统的服务端渲染有区别\n\n首先要理解 CSR 的对立面是 Pre-render，而不是 SSR。SSR 只是一种 pre-render 的方法，SSG 也是一种 pre-render 的方法。\n\n其次要理解，**SSG 也运行在服务端**。更准确的说法是 SSG 是“服务端 build 时预渲染”，SSR 是“服务端运行时预渲染”。但是 Server-side rendering 字面上把 SSG 也概括进去了。\n\nNext.js 对 SSG 和 SSR 的定义。\n\n> ### [Two forms of Pre-rendering](https://nextjs.org/docs/basic-features/pages#two-forms-of-pre-rendering)\n>\n> - [**Static Generation (Recommended)**](https://nextjs.org/docs/basic-features/pages#static-generation-recommended): The HTML is generated at **build time** and will be reused on each request.\n>\n> - [**Server-side Rendering**](https://nextjs.org/docs/basic-features/pages#server-side-rendering): The HTML is generated on **each request**.\n\n而传统说的服务端渲染，其实是同时包含了 Next.js 的 SSG 渲染与 SSR 渲染。\n\n那么问题是，按照 Next.js 的 SSR 定义，SSR 是不是无法 export 成静态页面？\n\n这其实要看有没有对 http request 进行处理，或者有别的要和 server 打交道的代码。 即便你用 SSR，但每次都是在做一些和 http request 无关的事情，那这不会对 export 造成影响。这也是为什么 `getInitialProps` 支持 export 但又支持得不太完全。\n\n比如 styled-components 可以预渲染时注入 style，但这个有两种写法，第一种是 styled-components [官方文档](https://styled-components.com/docs/advanced#server-side-rendering)，用的标准 SSR，无法 export。第二种写法在 [Next.js 仓库](https://github.com/vercel/next.js/tree/canary/examples/with-styled-components)，用的了服务端做预渲染，但又不像一般的 SSR，可以 export，只不过 req 和 res 为空，概念上可以说就是个 SSG。\n\n再说吸引我的点\n\n1. SSR 和 CSR 同构，可以看成 CSR 基础上增强首屏 SEO 能力，也可以看成传统 SSR 基础上加入 CSR 的优点（节省服务器资源bla），这样小型页面生成不用分开做数据 mock，直接一把唆。\n2. CSR 和 build 时预渲染都算是纯前端，能完全生成静态页面的。而 Next.js 依靠 Node 拥有一定的后端处理能力（虽然我用不上）\n\n","tags":[],"imgsmd":[],"sourceFile":"001.md","csrIndex":[10,9]}]