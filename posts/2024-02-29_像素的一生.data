[{"_1":2},"routes/posts.$slug",{"_3":4},"data",{"_5":6,"_95":96,"_99":100},"post",{"_7":8,"_9":10,"_11":12,"_13":14,"_15":16,"_17":18,"_23":24,"_25":26,"_27":28,"_29":30,"_85":86,"_88":89,"_90":91,"_93":94},"title","ç¬”è®° - åƒç´ çš„ä¸€ç”Ÿ","slug","2024-02-29_åƒç´ çš„ä¸€ç”Ÿ","date","2024-02-29T15:45:11.000Z","description","æµè§ˆå™¨æ¸²æŸ“åŸç†","draft",false,"metadata",{"_19":20,"_21":22},"readingTime",4,"wordCount",1155.04,"excerpt","å†…å®¹æ¥è‡ªäº 2018 å¹´è°·æ­Œçš„ä¸€ä¸ªè§†é¢‘ã€‚åŸè§†é¢‘ä¸é•¿ä½†å†…å®¹å¾ˆå¤šï¼Œéå¸¸å€¼å¾—ä¸€çœ‹ã€‚Chrome çš„æ¸²æŸ“æœºåˆ¶æ˜¯åœ¨ä¸æ–­å˜åŒ–çš„ã€‚\nç¬”è®°åŸå­˜äº Logseqï¼Œå¦‚æœæœ‰ç±»ä¼¼äºï¼Œâ€œè§CSS/å›¾å±‚â€ä¸€ç±»çš„è¯­å¥ï¼Œä¸ºç¬”è®°å†…è¶…é“¾æ¥ã€‚ç›¸å…³æ¦‚å¿µéœ€è‡ªè¡Œäº†è§£ã€‚\nğŸ“š èµ„æ–™\n\n\nbç«™è§†é¢‘ - 2018\n\n\nè‹±æ–‡slides\n\n\næ€å¦æ–‡ç« \n\n\næ¸²æŸ“æµç¨‹ï¼šweb content â†’ magic(rendering) â†’ pixels\n1. Web content\næœ€å¸¸è§çš„ HTML + CSS + Javascript API\nè¿˜æœ‰å›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ã€web","content_html","<p>å†…å®¹æ¥è‡ªäº 2018 å¹´è°·æ­Œçš„ä¸€ä¸ªè§†é¢‘ã€‚åŸè§†é¢‘ä¸é•¿ä½†å†…å®¹å¾ˆå¤šï¼Œéå¸¸å€¼å¾—ä¸€çœ‹ã€‚Chrome çš„æ¸²æŸ“æœºåˆ¶æ˜¯åœ¨ä¸æ–­å˜åŒ–çš„ã€‚</p>\n<p>ç¬”è®°åŸå­˜äº Logseqï¼Œå¦‚æœæœ‰ç±»ä¼¼äºï¼Œâ€œè§CSS/å›¾å±‚â€ä¸€ç±»çš„è¯­å¥ï¼Œä¸ºç¬”è®°å†…è¶…é“¾æ¥ã€‚ç›¸å…³æ¦‚å¿µéœ€è‡ªè¡Œäº†è§£ã€‚</p>\n<p>ğŸ“š <strong>èµ„æ–™</strong></p>\n<ul>\n<li>\n<p><a href=\"https://www.bilibili.com/video/av35265997/?vd_source=a94b8ba67535fb1431364b8c5fac341d\">bç«™è§†é¢‘ - 2018</a></p>\n</li>\n<li>\n<p><a href=\"https://docs.google.com/presentation/d/1boPxbgNrTU0ddsc144rcXayGA_WF53k96imRH8Mp34Y/edit?pli=1\">è‹±æ–‡slides</a></p>\n</li>\n<li>\n<p><a href=\"https://segmentfault.com/a/1190000020102554\">æ€å¦æ–‡ç« </a></p>\n</li>\n</ul>\n<p><strong>æ¸²æŸ“æµç¨‹</strong>ï¼šweb content â†’ magic(rendering) â†’ pixels</p>\n<h2>1. Web content</h2>\n<p>æœ€å¸¸è§çš„ HTML + CSS + Javascript API</p>\n<p>è¿˜æœ‰å›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ã€web assemblyã€WebGLã€Canvasã€PDFç­‰ç­‰</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342847.webp\" alt=\"Web Content\"></p>\n<h2>2. æ¸²æŸ“</h2>\n<p>æ¸²æŸ“æ˜¯åœ¨ä¸€ä¸ª sandbox è¿›è¡Œçš„ã€‚æ¸²æŸ“å¼•æ“ Blink æ˜¯æ¸²æŸ“ä»£ç çš„ä¸€ä¸ªå­é›†ã€‚</p>\n<p>æ“ä½œç³»ç»Ÿæ¸²æŸ“ APIï¼šOpenGLï¼ŒDirectX(Windows), vulkanã€‚åŒ…å« textures shaders ç­‰ç­‰ã€‚</p>\n<h3>2.1 æ¸²æŸ“ç›®æ ‡</h3>\n<ol>\n<li>\n<p>æŠŠ web content æ¸²æŸ“ä¸º openGL çš„è°ƒç”¨</p>\n</li>\n<li>\n<p>ä¸ºæ›´æ–°æ¸²æŸ“å»ºç«‹èµ·å¯¹åº”çš„æ•°æ®ç»“æ„</p>\n</li>\n</ol>\n<h3>2.2 åŸºæœ¬æ¸²æŸ“æµç¨‹</h3>\n<p><img src=\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342848.webp\" alt=\"æ¸²æŸ“æµç¨‹\"></p>\n<p>æ¸²æŸ“æµç¨‹å¤ªå¤æ‚ï¼Œä¼šè¢«åˆ†ä¸ºå‡ ä¸ªé˜¶æ®µè¿›è¡Œæ•°æ®ç»“æ„çš„è½¬æ¢</p>\n<p>ä¸æ˜¯æ¯ä¸€æ¬¡æ›´æ–°æ¸²æŸ“ï¼Œéƒ½è¦èµ°å…¨éƒ¨çš„æµç¨‹ã€‚ç›¸å…³çœ‹ æµè§ˆå™¨/æ¸²æŸ“åŸç† ä¸­çš„å›æµä¸é‡ç»˜ã€‚</p>\n<h4>HTML to DOM</h4>\n<p>è§£æ HTML ä¸º DOM æ ‘ã€‚DOMæ ‘çš„ä½œç”¨æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªè¡¨ç¤ºæ–‡æ¡£ç»“æ„ï¼ŒäºŒæ˜¯æš´éœ² API ç»™ Javascriptï¼Œç”± V8 JSå¼•æ“è¿›è¡Œ API ç»‘å®šã€‚</p>\n<h4>CSS to ComputedStyle</h4>\n<p>CSS è½¬æ¢ä¸º StyleRule é›†ï¼Œæ¯ä¸ª StyleRule åŒ…å« CSSSelector å’Œ CSSPropertyValueã€‚æµç¨‹å¦‚å›¾</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342849.webp\" alt=\"css parser\"></p>\n<p>æ ¹æ® css æ ·å¼è§„åˆ™ï¼Œè®¡ç®—å‡ºæ¯ä¸ª DOM å…ƒç´ æ ·å¼å±æ€§çš„æœ€ç»ˆå€¼ï¼Œå­˜å‚¨äº <strong>ComputedStyle</strong> å¯¹è±¡æ¨¡å‹ä¸­ï¼Œæ˜¯ä¸€ä¸ª style properties ä¸ values çš„è¶…å¤§æ˜ å°„ã€‚è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸º Style Resolutionã€‚</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342850.webp\" alt=\"style resolution\"></p>\n<p><strong>ComputedStyle</strong> å¯¹è±¡å·²ç»æš´éœ²ç»™äº† JSã€‚ä½¿ç”¨<code>getComputedStyle(element)['padding-top']</code>å³å¯è·å–ã€‚åœ¨ Dev tools çš„ Elements ä¸­çš„ Computed é€‰é¡¹å¡çš„å€¼å°±æ˜¯ä¾æ®æ­¤ å¯¹è±¡æ¥çš„ã€‚</p>\n<h4>Layout Stage</h4>\n<p>ä¾‹å­ï¼š</p>\n<ul>\n<li>Web æœ€åŸºç¡€çš„ Block Flow å¸ƒå±€ï¼Œéœ€è¦è®¡ç®—å‡º Block çš„ xã€yã€widthã€heightã€‚</li>\n<li>ç”±äº Block è‡ªé€‚åº”é«˜åº¦ï¼Œéœ€è¦æ ¹æ®å†…å®¹çš„å°ºå¯¸ï¼Œæ‰¾åˆ°æ–‡å­—æ¢è¡Œçš„åœ°æ–¹ï¼Œä»¥è®¡ç®—æ¯ä¸ª Block  çš„é«˜åº¦ã€‚</li>\n<li>æ¯ä¸€ä¸ª Block çš„çŸ©å½¢æœ‰å¤šç§è¾¹ç•Œï¼ˆåœ¨CSS/ç›’æ¨¡å‹ä¸­è¯´å¾—å¾ˆæ¸…æ¥šï¼‰ã€‚å†…å®¹ overflow æ—¶ï¼Œéœ€è¦è®¡ç®—ä¸¤ä¸ªçŸ©å½¢ï¼Œä¸€ä¸ªæ˜¯<strong>å®é™…å†…å®¹åŒºåŸŸ</strong>ï¼Œä¸€ä¸ªæ˜¯<strong>èƒ½æ˜¾ç¤ºå‡ºçš„å†…å®¹çš„åŒºåŸŸ</strong>ã€‚å¦‚æœå†…å®¹å¯æ»šåŠ¨ï¼Œè¿˜è¦è®¡ç®—<strong>æ»šåŠ¨è¾¹ç•Œ</strong>å’Œ<strong>æ»šåŠ¨æ¡è¾¹ç•Œ</strong>ã€‚</li>\n</ul>\n<p>Document çš„æ ¹èŠ‚ç‚¹æœ¬èº«å°±æ˜¯ overflow ä¸”å¯æ»šåŠ¨çš„ã€‚</p>\n<p>Layout Objects ä¹Ÿæ ‘ç»“æ„å­˜åœ¨ï¼Œå‡ ä¹ä¸ DOM æ˜¯ä¸€å¯¹ä¸€ï¼Œä½†å¹¶éæ€»æ˜¯å¦‚æ­¤ã€‚æ¯”å¦‚ä¼ªå…ƒç´ ã€æµ®åŠ¨å…ƒç´ ã€‚</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342851.webp\" alt=\"layout\"></p>\n<p>åœ¨ style è®¡ç®—åä¼šæ„å»ºä¸€ä¸ªæ²¡æœ‰å¡«å…¥ä»»ä½•æ•°æ®çš„ <strong>Layout Tree</strong>ã€‚</p>\n<p><strong>æ›´æ–°å¸ƒå±€</strong>çš„æœ¬è´¨å°±æ˜¯éå† layout tree å¹¶å‘é‡Œé¢å¡«å……æ‰€æœ‰æ•°æ®ã€‚</p>\n<p>Slidesé‡Œè¯´ç›®å‰æ²¡æœ‰æŠŠ Layout Stage çš„è¾“å…¥è¾“å‡ºåŒºåˆ†å¼€ï¼Œä½†æ²¡ç»†è¯´ï¼Œåªæ˜¯è¯´ä¸‹ä¸ªç‰ˆæœ¬ä¼šæ”¹ã€‚æ”¾ä¸ªå›¾</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342852.webp\" alt=\"Layout Stage NG\"></p>\n<h4>Paint to display item lists</h4>\n<p>åšç±»ä¼¼äºåœ¨æŒ‡å®šåæ ‡å†…ç”»ä¸€ä¸ªçº¢è‰²çš„çŸ©å½¢è¿™æ ·çš„åŠ¨ä½œã€‚ä»£ç ç»“æ„ä¸Š ï¼Œæ˜¯ LayoutObject æœ‰ä¸€ä¸ª Paint æ–¹æ³•ã€‚å»è°ƒç”¨æ›´åº•å±‚çš„ Paint  APIã€‚</p>\n<p><strong>æ­¤é˜¶æ®µç”Ÿæˆâ€œä½œç”»æ­¥éª¤â€ï¼Œè¿˜æ²¡æœ‰çœŸçš„ç”»å‡ºåƒç´ </strong>ã€‚æ­¥éª¤æ˜¯å¯ä»¥é‡æ”¾çš„ã€‚è‡³äºä¸ºä»€ä¹ˆè¿™æ ·åšï¼Œä¹‹åå†è¯´ï¼ˆç„¶è€Œä¹‹åå¹¶æ²¡æœ‰è¯´ï¼‰ã€‚</p>\n<p>Paint æ˜¯ä» z-index æœ€å¤§åˆ°æœ€å°è¿›è¡Œçš„ï¼Œè€Œä¸æ˜¯ DOM çš„å‰åé¡ºåºã€‚è€Œä¸¤ä¸ªå¹¶åˆ—çš„å±‚å ä¸Šä¸‹æ–‡æ—¶ï¼Œåè¦†ç›–å‰ã€‚åœ¨ä¸€ä¸ª CSS/å±‚å ä¸Šä¸‹æ–‡ å†…ï¼ŒæŒ‰å±‚å ä¸Šä¸‹æ–‡çš„å †å è§„åˆ™ç»˜åˆ¶ï¼ˆzè½´çš„å±‚å è§„åˆ™ï¼‰ï¼Œå¦‚å›¾</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342853.webp\" alt=\"image.png\"></p>\n<h4>Rasterization æ …æ ¼åŒ–</h4>\n<p>å°† Display Itemï¼ˆä½äº CC Layer ä¸­ï¼Œä¹‹åè¯´ï¼‰ä¸­è®°å½•çš„ Paint æ“ä½œè½¬åŒ–ä¸º<strong>ä½å›¾</strong>(bitmap)ã€‚</p>\n<p>raster bitmap é€šå¸¸ä¿å­˜äº GPU å†…å­˜ä¸­ï¼Œè¢« <strong>OpenGL Texture Object</strong> å¼•ç”¨ã€‚GPU ä¸ä»…å¯ä»¥ä¿å­˜ bitmapï¼Œä¹Ÿå¯ä»¥ç”Ÿæˆ bitmapã€‚å« <strong>accelerated rasterization</strong>ã€‚</p>\n<p><strong>æ­¤æ—¶åƒç´ çº¹ç†å·²ç»ç”Ÿæˆåˆ°å†…å­˜ï¼Œä½†è¿˜æ˜¯æ²¡æœ‰ç”»åˆ°å±å¹•ä¸Šã€‚</strong></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342854.webp\" alt=\"Rasterization\"></p>\n<p>æ …æ ¼åŒ–é€šè¿‡ <strong>SKIA åº“</strong>ç”Ÿæˆå¯¹ <strong>OpenGL</strong> çš„è°ƒç”¨ã€‚SKIA æä¾›äº†ä¸€ç³»åˆ—å¯¹ç¡¬ä»¶çš„æŠ½è±¡ã€‚å…·ä½“è€Œè¨€ï¼ŒPaintOps ä¼šè°ƒç”¨ SKIA ä¸­çš„ SkCanvas å¯¹è±¡ã€‚</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342856.webp\" alt=\"SKIA\"></p>\n<p>ç”±äºæ¸²æŸ“è¿‡ç¨‹æ˜¯åœ¨ sandbox è¿›è¡Œçš„ï¼Œ ä¸èƒ½äº§ç”Ÿç³»ç»Ÿè°ƒç”¨ï¼ŒOpenGL è°ƒç”¨æ˜¯é€šè¿‡ command buffer å¡è¿›å¦ä¸€ä¸ªè¿›ç¨‹ <strong>GPU Process</strong> æ‰§è¡Œçš„ã€‚GPU Process æ¥å—åˆ°ç»˜åˆ¶å‘½ä»¤åé€šè¿‡ GL API å»äº§ç”ŸçœŸæ­£çš„ GL è°ƒç”¨ã€‚</p>\n<p>ä½¿ç”¨ GPU process éš”ç¦»æ¸²æŸ“è¿›ç¨‹é™¤äº†æ¸²æŸ“è¿›ç¨‹æœ‰æ²™ç›’æœºåˆ¶å¤–ï¼ŒOpenGL å¯èƒ½ä¹Ÿä¸å¤ªç¨³å®šæˆ–è€…æ˜¯æœ‰æ¼æ´ã€‚GPU Process å¯ä»¥åšä¸€äº›ä¿æŠ¤æªæ–½ã€‚</p>\n<p>GL API æ¥æºäºç³»ç»ŸåŠ¨æ€åº“ <code>libGLESv2.so</code>ã€‚ä½†æ˜¯ windows ä¸­æ¥è‡ªäº Google çš„ ANGLE åº“ <code>libglesv2.dll</code>ï¼Œå› ä¸º Windows ä¸Šæ¸²æŸ“ä¸æ˜¯ç”¨çš„ OpenGLï¼Œè€Œæ˜¯ DirectX APIã€‚ANGLE åº“å¯ä»¥ç¿»è¯‘ OpenGL è°ƒç”¨ä¸º DirectX è°ƒç”¨ã€‚</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342857.webp\" alt=\"GL API\"></p>\n<h2>3. å›¾å±‚åˆæˆ</h2>\n<h3>3.1 å¸§ä¸åŠ¨ç”»</h3>\n<p>æ¯ä¸€å¸§æ˜¯å½“å‰ Web å†…å®¹çš„å®Œæ•´å‘ˆç°ã€‚</p>\n<p>åŠ¨ç”»æ˜¯è¿ç»­çš„å¸§ã€‚é’ˆå¯¹ç¬¬ä¸€éƒ¨åˆ†æåˆ°çš„ styleã€layoutã€paintã€rasterï¼Œæµè§ˆå™¨éƒ½åšäº†è·Ÿè¸ªå¤±æ•ˆçš„å¤„ç†ï¼Œåªé‡ç»˜æ”¹å˜çš„éƒ¨åˆ†ï¼Œå…¶ä»–éƒ¨åˆ†å¤ç”¨ã€‚</p>\n<h3>3.2 åˆæˆçº¿ç¨‹</h3>\n<p>ä¸€ä¸ªå•ç‹¬çš„æ¸²æŸ“çº¿ç¨‹ï¼Œå‡å°‘ JS ä¸»çº¿ç¨‹çš„å…¶ä»–æ“ä½œå’Œæ¸²æŸ“ä¹‹é—´ blockã€‚</p>\n<p><strong>å›¾å±‚</strong>ç»™åˆæˆçº¿ç¨‹æ¸²æŸ“ã€‚æ¯”å¦‚ video å’Œ gif åœ¨å•ç‹¬çš„å›¾å±‚ï¼Œè¿˜æœ‰ transform3D, will-change ç­‰ css å±æ€§ä¹Ÿä¼šæ–°å»ºå›¾å±‚è¿›è¡Œå¤„ç†ã€‚</p>\n<p>åˆæˆçº¿ç¨‹ä¹Ÿéœ€è¦å¤„ç†äº¤äº’ã€‚èƒ½å¤„ç†çš„å…ˆåˆæˆçº¿ç¨‹å¤„ç†ï¼ˆæ¯”å¦‚æ»šåŠ¨ï¼‰ï¼Œå¤„ç†ä¸äº†çš„å°±è¿›ä¸»çº¿ç¨‹ã€‚</p>\n<p><strong>Layer Tree</strong>ï¼ˆCC Layer Treeï¼‰</p>\n<p>å›¾å±‚ä¹Ÿæ˜¯ä»¥æ ‘ç»“æ„å­˜åœ¨ï¼Œå‰åºéå†ã€‚</p>\n<p>æœ‰çš„å›¾å±‚çš„å­˜åœ¨ä¸æ˜¯ç»˜åˆ¶ï¼Œè€Œæ˜¯å›¾å±‚æ•ˆæœï¼Œæ¯”å¦‚å‰ªè´´è’™ç‰ˆã€æ»¤é•œã€‚</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342858.webp\" alt=\"layer tree\"></p>\n<p>å›¾å±‚çš„åˆæˆä½äº CC (Chronium compositor) namspace, æ‰€ä»¥ä»£ç é‡Œæœ‰å¾ˆå¤š <code>cc::layer</code>ã€‚</p>\n<p>å¦‚æœä¸€ä¸ª Layout Object æ²¡æœ‰æŒ‡å®šå•ç‹¬çš„ layer(æ¯”å¦‚æ²¡æœ‰ will-change å±æ€§)ï¼Œå°±ä¼šè¢«ç»˜åˆ¶åˆ°çˆ¶ layer çš„å›¾å±‚ã€‚</p>\n<p>Paint Layer æ˜¯è¦è¢«åˆ†åˆ° CC LayerTree çš„ã€‚è¿™å°±æ˜¯CSS/å±‚å ä¸Šä¸‹æ–‡ä¸CSS/å›¾å±‚ä¹‹é—´çš„å…³ç³»ã€‚</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342859.webp\" alt=\"image.png\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342860.webp\" alt=\"paint layer map\"></p>\n<h3>3.3 compositioning update</h3>\n<p>åœ¨ä¸Šä¸€ç« çš„æµç¨‹ä¸­ï¼Œæ²¡æœ‰è®²åˆ°åˆæˆè¿™æ­¥ï¼Œå®é™…è¦åŠ ä¸Šã€‚å› ä¸ºåˆæˆä¸æ˜¯å¿…é¡»çš„ï¼Œä½†åˆæˆæ­¥éª¤èƒ½ä¼˜åŒ–æ¸²æŸ“ã€‚</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342861.webp\" alt=\"æ›´æ–°åˆæˆ\"></p>\n<p>æœªæ¥ï¼Œåˆ›å»ºå›¾å±‚çš„å·¥ä½œä¼šæ”¾åˆ° paint ä¹‹åï¼ˆslimming paintï¼‰</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342862.webp\" alt=\"commit\"></p>\n<p><strong>commit</strong></p>\n<p>æäº¤ä¸€æ¬¡åˆæˆã€‚è¿™é‡Œåˆæˆçº¿ç¨‹ä¸ä¸»çº¿ç¨‹éƒ½å­˜åœ¨ layer treeï¼Œéœ€è¦åŒæ­¥åˆæˆçº¿ç¨‹ä¸ä¸»çº¿ç¨‹çš„çŠ¶æ€ã€‚</p>\n<h3>3.4 Tilling</h3>\n<p>åœ¨ rastering é˜¶æ®µï¼ŒæŠŠ CC layer åˆ†å—æˆ tileã€‚</p>\n<p><strong>tile æ˜¯ raster çš„æœ€å°å•ä½</strong>ï¼Œåœ¨ä¸“é—¨çš„ <strong>raster çº¿ç¨‹</strong> è¿›è¡Œæ …æ ¼åŒ–ã€‚</p>\n<p>åˆæˆçº¿ç¨‹æœ‰ä¸€ä¸ª <strong>tile manager</strong> å®‰æ’ tile ä¼˜å…ˆçº§ã€‚</p>\n<p>ä¸åŒåˆ†è¾¨ç‡çš„ tile ç­–ç•¥æ˜¯ä¸åŒçš„ã€‚</p>\n<h3>3.5 Drawing</h3>\n<p>ä¸åŒ tile åˆæˆä¸º <strong>Quad</strong>ã€‚Quad å¼•ç”¨å†…å­˜ä¸­çš„ raster outputï¼Œå°è£…åœ¨åˆæˆè¿›ç¨‹ä¸­ï¼Œå†æäº¤åˆ°æµè§ˆå™¨è¿›ç¨‹ã€‚æµè§ˆå™¨åŠ¨ç”»å¸§çš„<strong>å¸§</strong>æ¦‚å¿µå°±æ˜¯ Quadã€‚</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342863.webp\" alt=\"Quad\"></p>\n<p>ä¸åŒ commit æœ‰å…ˆåé¡ºåºï¼Œéœ€è¦ä» pending <strong>æ¿€æ´»</strong>å†ç»˜åˆ¶ã€‚</p>\n<h3>3.6 Display</h3>\n<p>æµè§ˆå™¨è¿›ç¨‹å°† Quad å±•ç¤ºåˆ°å±å¹•ä¸Šçš„è¿‡ç¨‹ã€‚ä½äº Viz ç»„ä»¶ä¸­ï¼Œè°ƒç”¨ OpenGL ç»˜åˆ¶ GPU è¿›ç¨‹ä¸­çš„ Quad èµ„æºï¼Œå’Œ rastering çš„ GL call ä¸€æ ·ã€‚</p>\n<p>å¤§éƒ¨åˆ†å¹³å°çš„æ˜¾ç¤ºåˆæˆè¾“å‡ºæ˜¯åŒå€ç¼“å†²ï¼ˆæœ‰è¿‡æ¸¸æˆç”»é¢æ’•è£‚ç»éªŒçš„åº”è¯¥å¯¹è¿™æœ‰æ¦‚å¿µï¼‰ï¼Œquad æ˜¯åœ¨åå°ç¼“å†²å™¨ï¼ˆGPUçš„è¿˜æ˜¯Vizï¼Ÿï¼‰ä¸­ç»˜åˆ¶çš„ï¼Œç”¨ swap å‘½ä»¤è®©åå°çš„ quad åˆ°å‰å°å±•ç¤ºã€‚</p>\n<h2>4. æ€»ç»“</h2>\n<p>Blink å¼•æ“ä¸¥æ ¼æ‰§è¡Œäº†ä¸»çº¿ç¨‹çš„æ­¥éª¤ã€‚ä½†ç”±äºè¦å®ç° Web å¹³å°åŒ–ï¼Œæ˜¯æœ‰ä¸€äº›åˆæˆçº¿ç¨‹çš„æƒé™çš„ã€‚</p>\n<p><img src=\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342864.webp\" alt=\"æ€»ç»“\"></p>\n<h2>å…¶ä»–</h2>\n<p>æ¸²æŸ“å™¨å’Œæµè§ˆå™¨éƒ½ç”¨åˆ°äº† GPUï¼Œéƒ½æœ‰å‘GPUè¿›ç¨‹çš„IPCé€šé“ã€‚</p>\n<p>å¦‚æœæƒ³è®©æ»šåŠ¨çš„äº¤äº’äº§ç”Ÿçš„åŠ¨ç”»ä¸åœ¨ä¸»çº¿ç¨‹è€Œåœ¨åˆæˆçº¿ç¨‹æ‰§è¡Œï¼Œéœ€è¦å¼ºåˆ¶ will-transform åˆ†å±‚</p>","content_jsx","const{Fragment:n,jsx:e,jsxs:i}=arguments[0];function _createMdxContent(r){const l={a:\"a\",code:\"code\",h2:\"h2\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",strong:\"strong\",ul:\"ul\",...r.components};return i(n,{children:[e(l.p,{children:\"å†…å®¹æ¥è‡ªäº 2018 å¹´è°·æ­Œçš„ä¸€ä¸ªè§†é¢‘ã€‚åŸè§†é¢‘ä¸é•¿ä½†å†…å®¹å¾ˆå¤šï¼Œéå¸¸å€¼å¾—ä¸€çœ‹ã€‚Chrome çš„æ¸²æŸ“æœºåˆ¶æ˜¯åœ¨ä¸æ–­å˜åŒ–çš„ã€‚\"}),\"\\n\",e(l.p,{children:\"ç¬”è®°åŸå­˜äº Logseqï¼Œå¦‚æœæœ‰ç±»ä¼¼äºï¼Œâ€œè§CSS/å›¾å±‚â€ä¸€ç±»çš„è¯­å¥ï¼Œä¸ºç¬”è®°å†…è¶…é“¾æ¥ã€‚ç›¸å…³æ¦‚å¿µéœ€è‡ªè¡Œäº†è§£ã€‚\"}),\"\\n\",i(l.p,{children:[\"ğŸ“š \",e(l.strong,{children:\"èµ„æ–™\"})]}),\"\\n\",i(l.ul,{children:[\"\\n\",i(l.li,{children:[\"\\n\",e(l.p,{children:e(l.a,{href:\"https://www.bilibili.com/video/av35265997/?vd_source=a94b8ba67535fb1431364b8c5fac341d\",children:\"bç«™è§†é¢‘ - 2018\"})}),\"\\n\"]}),\"\\n\",i(l.li,{children:[\"\\n\",e(l.p,{children:e(l.a,{href:\"https://docs.google.com/presentation/d/1boPxbgNrTU0ddsc144rcXayGA_WF53k96imRH8Mp34Y/edit?pli=1\",children:\"è‹±æ–‡slides\"})}),\"\\n\"]}),\"\\n\",i(l.li,{children:[\"\\n\",e(l.p,{children:e(l.a,{href:\"https://segmentfault.com/a/1190000020102554\",children:\"æ€å¦æ–‡ç« \"})}),\"\\n\"]}),\"\\n\"]}),\"\\n\",i(l.p,{children:[e(l.strong,{children:\"æ¸²æŸ“æµç¨‹\"}),\"ï¼šweb content â†’ magic(rendering) â†’ pixels\"]}),\"\\n\",e(l.h2,{id:\"1-web-content\",children:\"1. Web content\"}),\"\\n\",e(l.p,{children:\"æœ€å¸¸è§çš„ HTML + CSS + Javascript API\"}),\"\\n\",e(l.p,{children:\"è¿˜æœ‰å›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ã€web assemblyã€WebGLã€Canvasã€PDFç­‰ç­‰\"}),\"\\n\",e(l.img,{src:\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342847.webp\",alt:\"Web Content\"}),\"\\n\",e(l.h2,{id:\"2-æ¸²æŸ“\",children:\"2. æ¸²æŸ“\"}),\"\\n\",e(l.p,{children:\"æ¸²æŸ“æ˜¯åœ¨ä¸€ä¸ª sandbox è¿›è¡Œçš„ã€‚æ¸²æŸ“å¼•æ“ Blink æ˜¯æ¸²æŸ“ä»£ç çš„ä¸€ä¸ªå­é›†ã€‚\"}),\"\\n\",e(l.p,{children:\"æ“ä½œç³»ç»Ÿæ¸²æŸ“ APIï¼šOpenGLï¼ŒDirectX(Windows), vulkanã€‚åŒ…å« textures shaders ç­‰ç­‰ã€‚\"}),\"\\n\",e(l.h3,{id:\"21-æ¸²æŸ“ç›®æ ‡\",children:\"2.1 æ¸²æŸ“ç›®æ ‡\"}),\"\\n\",i(l.ol,{children:[\"\\n\",i(l.li,{children:[\"\\n\",e(l.p,{children:\"æŠŠ web content æ¸²æŸ“ä¸º openGL çš„è°ƒç”¨\"}),\"\\n\"]}),\"\\n\",i(l.li,{children:[\"\\n\",e(l.p,{children:\"ä¸ºæ›´æ–°æ¸²æŸ“å»ºç«‹èµ·å¯¹åº”çš„æ•°æ®ç»“æ„\"}),\"\\n\"]}),\"\\n\"]}),\"\\n\",e(l.h3,{id:\"22-åŸºæœ¬æ¸²æŸ“æµç¨‹\",children:\"2.2 åŸºæœ¬æ¸²æŸ“æµç¨‹\"}),\"\\n\",e(l.img,{src:\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342848.webp\",alt:\"æ¸²æŸ“æµç¨‹\"}),\"\\n\",e(l.p,{children:\"æ¸²æŸ“æµç¨‹å¤ªå¤æ‚ï¼Œä¼šè¢«åˆ†ä¸ºå‡ ä¸ªé˜¶æ®µè¿›è¡Œæ•°æ®ç»“æ„çš„è½¬æ¢\"}),\"\\n\",e(l.p,{children:\"ä¸æ˜¯æ¯ä¸€æ¬¡æ›´æ–°æ¸²æŸ“ï¼Œéƒ½è¦èµ°å…¨éƒ¨çš„æµç¨‹ã€‚ç›¸å…³çœ‹ æµè§ˆå™¨/æ¸²æŸ“åŸç† ä¸­çš„å›æµä¸é‡ç»˜ã€‚\"}),\"\\n\",e(l.h4,{id:\"html-to-dom\",children:\"HTML to DOM\"}),\"\\n\",e(l.p,{children:\"è§£æ HTML ä¸º DOM æ ‘ã€‚DOMæ ‘çš„ä½œç”¨æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªè¡¨ç¤ºæ–‡æ¡£ç»“æ„ï¼ŒäºŒæ˜¯æš´éœ² API ç»™ Javascriptï¼Œç”± V8 JSå¼•æ“è¿›è¡Œ API ç»‘å®šã€‚\"}),\"\\n\",e(l.h4,{id:\"css-to-computedstyle\",children:\"CSS to ComputedStyle\"}),\"\\n\",e(l.p,{children:\"CSS è½¬æ¢ä¸º StyleRule é›†ï¼Œæ¯ä¸ª StyleRule åŒ…å« CSSSelector å’Œ CSSPropertyValueã€‚æµç¨‹å¦‚å›¾\"}),\"\\n\",e(l.img,{src:\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342849.webp\",alt:\"css parser\"}),\"\\n\",i(l.p,{children:[\"æ ¹æ® css æ ·å¼è§„åˆ™ï¼Œè®¡ç®—å‡ºæ¯ä¸ª DOM å…ƒç´ æ ·å¼å±æ€§çš„æœ€ç»ˆå€¼ï¼Œå­˜å‚¨äº \",e(l.strong,{children:\"ComputedStyle\"}),\" å¯¹è±¡æ¨¡å‹ä¸­ï¼Œæ˜¯ä¸€ä¸ª style properties ä¸ values çš„è¶…å¤§æ˜ å°„ã€‚è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸º Style Resolutionã€‚\"]}),\"\\n\",e(l.img,{src:\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342850.webp\",alt:\"style resolution\"}),\"\\n\",i(l.p,{children:[e(l.strong,{children:\"ComputedStyle\"}),\" å¯¹è±¡å·²ç»æš´éœ²ç»™äº† JSã€‚ä½¿ç”¨\",e(l.code,{children:\"getComputedStyle(element)['padding-top']\"}),\"å³å¯è·å–ã€‚åœ¨ Dev tools çš„ Elements ä¸­çš„ Computed é€‰é¡¹å¡çš„å€¼å°±æ˜¯ä¾æ®æ­¤ å¯¹è±¡æ¥çš„ã€‚\"]}),\"\\n\",e(l.h4,{id:\"layout-stage\",children:\"Layout Stage\"}),\"\\n\",e(l.p,{children:\"ä¾‹å­ï¼š\"}),\"\\n\",i(l.ul,{children:[\"\\n\",e(l.li,{children:\"Web æœ€åŸºç¡€çš„ Block Flow å¸ƒå±€ï¼Œéœ€è¦è®¡ç®—å‡º Block çš„ xã€yã€widthã€heightã€‚\"}),\"\\n\",e(l.li,{children:\"ç”±äº Block è‡ªé€‚åº”é«˜åº¦ï¼Œéœ€è¦æ ¹æ®å†…å®¹çš„å°ºå¯¸ï¼Œæ‰¾åˆ°æ–‡å­—æ¢è¡Œçš„åœ°æ–¹ï¼Œä»¥è®¡ç®—æ¯ä¸ª Block  çš„é«˜åº¦ã€‚\"}),\"\\n\",i(l.li,{children:[\"æ¯ä¸€ä¸ª Block çš„çŸ©å½¢æœ‰å¤šç§è¾¹ç•Œï¼ˆåœ¨CSS/ç›’æ¨¡å‹ä¸­è¯´å¾—å¾ˆæ¸…æ¥šï¼‰ã€‚å†…å®¹ overflow æ—¶ï¼Œéœ€è¦è®¡ç®—ä¸¤ä¸ªçŸ©å½¢ï¼Œä¸€ä¸ªæ˜¯\",e(l.strong,{children:\"å®é™…å†…å®¹åŒºåŸŸ\"}),\"ï¼Œä¸€ä¸ªæ˜¯\",e(l.strong,{children:\"èƒ½æ˜¾ç¤ºå‡ºçš„å†…å®¹çš„åŒºåŸŸ\"}),\"ã€‚å¦‚æœå†…å®¹å¯æ»šåŠ¨ï¼Œè¿˜è¦è®¡ç®—\",e(l.strong,{children:\"æ»šåŠ¨è¾¹ç•Œ\"}),\"å’Œ\",e(l.strong,{children:\"æ»šåŠ¨æ¡è¾¹ç•Œ\"}),\"ã€‚\"]}),\"\\n\"]}),\"\\n\",e(l.p,{children:\"Document çš„æ ¹èŠ‚ç‚¹æœ¬èº«å°±æ˜¯ overflow ä¸”å¯æ»šåŠ¨çš„ã€‚\"}),\"\\n\",e(l.p,{children:\"Layout Objects ä¹Ÿæ ‘ç»“æ„å­˜åœ¨ï¼Œå‡ ä¹ä¸ DOM æ˜¯ä¸€å¯¹ä¸€ï¼Œä½†å¹¶éæ€»æ˜¯å¦‚æ­¤ã€‚æ¯”å¦‚ä¼ªå…ƒç´ ã€æµ®åŠ¨å…ƒç´ ã€‚\"}),\"\\n\",e(l.img,{src:\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342851.webp\",alt:\"layout\"}),\"\\n\",i(l.p,{children:[\"åœ¨ style è®¡ç®—åä¼šæ„å»ºä¸€ä¸ªæ²¡æœ‰å¡«å…¥ä»»ä½•æ•°æ®çš„ \",e(l.strong,{children:\"Layout Tree\"}),\"ã€‚\"]}),\"\\n\",i(l.p,{children:[e(l.strong,{children:\"æ›´æ–°å¸ƒå±€\"}),\"çš„æœ¬è´¨å°±æ˜¯éå† layout tree å¹¶å‘é‡Œé¢å¡«å……æ‰€æœ‰æ•°æ®ã€‚\"]}),\"\\n\",e(l.p,{children:\"Slidesé‡Œè¯´ç›®å‰æ²¡æœ‰æŠŠ Layout Stage çš„è¾“å…¥è¾“å‡ºåŒºåˆ†å¼€ï¼Œä½†æ²¡ç»†è¯´ï¼Œåªæ˜¯è¯´ä¸‹ä¸ªç‰ˆæœ¬ä¼šæ”¹ã€‚æ”¾ä¸ªå›¾\"}),\"\\n\",e(l.img,{src:\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342852.webp\",alt:\"Layout Stage NG\"}),\"\\n\",e(l.h4,{id:\"paint-to-display-item-lists\",children:\"Paint to display item lists\"}),\"\\n\",e(l.p,{children:\"åšç±»ä¼¼äºåœ¨æŒ‡å®šåæ ‡å†…ç”»ä¸€ä¸ªçº¢è‰²çš„çŸ©å½¢è¿™æ ·çš„åŠ¨ä½œã€‚ä»£ç ç»“æ„ä¸Š ï¼Œæ˜¯ LayoutObject æœ‰ä¸€ä¸ª Paint æ–¹æ³•ã€‚å»è°ƒç”¨æ›´åº•å±‚çš„ Paint  APIã€‚\"}),\"\\n\",i(l.p,{children:[e(l.strong,{children:\"æ­¤é˜¶æ®µç”Ÿæˆâ€œä½œç”»æ­¥éª¤â€ï¼Œè¿˜æ²¡æœ‰çœŸçš„ç”»å‡ºåƒç´ \"}),\"ã€‚æ­¥éª¤æ˜¯å¯ä»¥é‡æ”¾çš„ã€‚è‡³äºä¸ºä»€ä¹ˆè¿™æ ·åšï¼Œä¹‹åå†è¯´ï¼ˆç„¶è€Œä¹‹åå¹¶æ²¡æœ‰è¯´ï¼‰ã€‚\"]}),\"\\n\",e(l.p,{children:\"Paint æ˜¯ä» z-index æœ€å¤§åˆ°æœ€å°è¿›è¡Œçš„ï¼Œè€Œä¸æ˜¯ DOM çš„å‰åé¡ºåºã€‚è€Œä¸¤ä¸ªå¹¶åˆ—çš„å±‚å ä¸Šä¸‹æ–‡æ—¶ï¼Œåè¦†ç›–å‰ã€‚åœ¨ä¸€ä¸ª CSS/å±‚å ä¸Šä¸‹æ–‡ å†…ï¼ŒæŒ‰å±‚å ä¸Šä¸‹æ–‡çš„å †å è§„åˆ™ç»˜åˆ¶ï¼ˆzè½´çš„å±‚å è§„åˆ™ï¼‰ï¼Œå¦‚å›¾\"}),\"\\n\",e(l.img,{src:\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342853.webp\",alt:\"image.png\"}),\"\\n\",e(l.h4,{id:\"rasterization-æ …æ ¼åŒ–\",children:\"Rasterization æ …æ ¼åŒ–\"}),\"\\n\",i(l.p,{children:[\"å°† Display Itemï¼ˆä½äº CC Layer ä¸­ï¼Œä¹‹åè¯´ï¼‰ä¸­è®°å½•çš„ Paint æ“ä½œè½¬åŒ–ä¸º\",e(l.strong,{children:\"ä½å›¾\"}),\"(bitmap)ã€‚\"]}),\"\\n\",i(l.p,{children:[\"raster bitmap é€šå¸¸ä¿å­˜äº GPU å†…å­˜ä¸­ï¼Œè¢« \",e(l.strong,{children:\"OpenGL Texture Object\"}),\" å¼•ç”¨ã€‚GPU ä¸ä»…å¯ä»¥ä¿å­˜ bitmapï¼Œä¹Ÿå¯ä»¥ç”Ÿæˆ bitmapã€‚å« \",e(l.strong,{children:\"accelerated rasterization\"}),\"ã€‚\"]}),\"\\n\",e(l.p,{children:e(l.strong,{children:\"æ­¤æ—¶åƒç´ çº¹ç†å·²ç»ç”Ÿæˆåˆ°å†…å­˜ï¼Œä½†è¿˜æ˜¯æ²¡æœ‰ç”»åˆ°å±å¹•ä¸Šã€‚\"})}),\"\\n\",e(l.img,{src:\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342854.webp\",alt:\"Rasterization\"}),\"\\n\",i(l.p,{children:[\"æ …æ ¼åŒ–é€šè¿‡ \",e(l.strong,{children:\"SKIA åº“\"}),\"ç”Ÿæˆå¯¹ \",e(l.strong,{children:\"OpenGL\"}),\" çš„è°ƒç”¨ã€‚SKIA æä¾›äº†ä¸€ç³»åˆ—å¯¹ç¡¬ä»¶çš„æŠ½è±¡ã€‚å…·ä½“è€Œè¨€ï¼ŒPaintOps ä¼šè°ƒç”¨ SKIA ä¸­çš„ SkCanvas å¯¹è±¡ã€‚\"]}),\"\\n\",e(l.img,{src:\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342856.webp\",alt:\"SKIA\"}),\"\\n\",i(l.p,{children:[\"ç”±äºæ¸²æŸ“è¿‡ç¨‹æ˜¯åœ¨ sandbox è¿›è¡Œçš„ï¼Œ ä¸èƒ½äº§ç”Ÿç³»ç»Ÿè°ƒç”¨ï¼ŒOpenGL è°ƒç”¨æ˜¯é€šè¿‡ command buffer å¡è¿›å¦ä¸€ä¸ªè¿›ç¨‹ \",e(l.strong,{children:\"GPU Process\"}),\" æ‰§è¡Œçš„ã€‚GPU Process æ¥å—åˆ°ç»˜åˆ¶å‘½ä»¤åé€šè¿‡ GL API å»äº§ç”ŸçœŸæ­£çš„ GL è°ƒç”¨ã€‚\"]}),\"\\n\",e(l.p,{children:\"ä½¿ç”¨ GPU process éš”ç¦»æ¸²æŸ“è¿›ç¨‹é™¤äº†æ¸²æŸ“è¿›ç¨‹æœ‰æ²™ç›’æœºåˆ¶å¤–ï¼ŒOpenGL å¯èƒ½ä¹Ÿä¸å¤ªç¨³å®šæˆ–è€…æ˜¯æœ‰æ¼æ´ã€‚GPU Process å¯ä»¥åšä¸€äº›ä¿æŠ¤æªæ–½ã€‚\"}),\"\\n\",i(l.p,{children:[\"GL API æ¥æºäºç³»ç»ŸåŠ¨æ€åº“ \",e(l.code,{children:\"libGLESv2.so\"}),\"ã€‚ä½†æ˜¯ windows ä¸­æ¥è‡ªäº Google çš„ ANGLE åº“ \",e(l.code,{children:\"libglesv2.dll\"}),\"ï¼Œå› ä¸º Windows ä¸Šæ¸²æŸ“ä¸æ˜¯ç”¨çš„ OpenGLï¼Œè€Œæ˜¯ DirectX APIã€‚ANGLE åº“å¯ä»¥ç¿»è¯‘ OpenGL è°ƒç”¨ä¸º DirectX è°ƒç”¨ã€‚\"]}),\"\\n\",e(l.img,{src:\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342857.webp\",alt:\"GL API\"}),\"\\n\",e(l.h2,{id:\"3-å›¾å±‚åˆæˆ\",children:\"3. å›¾å±‚åˆæˆ\"}),\"\\n\",e(l.h3,{id:\"31-å¸§ä¸åŠ¨ç”»\",children:\"3.1 å¸§ä¸åŠ¨ç”»\"}),\"\\n\",e(l.p,{children:\"æ¯ä¸€å¸§æ˜¯å½“å‰ Web å†…å®¹çš„å®Œæ•´å‘ˆç°ã€‚\"}),\"\\n\",e(l.p,{children:\"åŠ¨ç”»æ˜¯è¿ç»­çš„å¸§ã€‚é’ˆå¯¹ç¬¬ä¸€éƒ¨åˆ†æåˆ°çš„ styleã€layoutã€paintã€rasterï¼Œæµè§ˆå™¨éƒ½åšäº†è·Ÿè¸ªå¤±æ•ˆçš„å¤„ç†ï¼Œåªé‡ç»˜æ”¹å˜çš„éƒ¨åˆ†ï¼Œå…¶ä»–éƒ¨åˆ†å¤ç”¨ã€‚\"}),\"\\n\",e(l.h3,{id:\"32-åˆæˆçº¿ç¨‹\",children:\"3.2 åˆæˆçº¿ç¨‹\"}),\"\\n\",e(l.p,{children:\"ä¸€ä¸ªå•ç‹¬çš„æ¸²æŸ“çº¿ç¨‹ï¼Œå‡å°‘ JS ä¸»çº¿ç¨‹çš„å…¶ä»–æ“ä½œå’Œæ¸²æŸ“ä¹‹é—´ blockã€‚\"}),\"\\n\",i(l.p,{children:[e(l.strong,{children:\"å›¾å±‚\"}),\"ç»™åˆæˆçº¿ç¨‹æ¸²æŸ“ã€‚æ¯”å¦‚ video å’Œ gif åœ¨å•ç‹¬çš„å›¾å±‚ï¼Œè¿˜æœ‰ transform3D, will-change ç­‰ css å±æ€§ä¹Ÿä¼šæ–°å»ºå›¾å±‚è¿›è¡Œå¤„ç†ã€‚\"]}),\"\\n\",e(l.p,{children:\"åˆæˆçº¿ç¨‹ä¹Ÿéœ€è¦å¤„ç†äº¤äº’ã€‚èƒ½å¤„ç†çš„å…ˆåˆæˆçº¿ç¨‹å¤„ç†ï¼ˆæ¯”å¦‚æ»šåŠ¨ï¼‰ï¼Œå¤„ç†ä¸äº†çš„å°±è¿›ä¸»çº¿ç¨‹ã€‚\"}),\"\\n\",i(l.p,{children:[e(l.strong,{children:\"Layer Tree\"}),\"ï¼ˆCC Layer Treeï¼‰\"]}),\"\\n\",e(l.p,{children:\"å›¾å±‚ä¹Ÿæ˜¯ä»¥æ ‘ç»“æ„å­˜åœ¨ï¼Œå‰åºéå†ã€‚\"}),\"\\n\",e(l.p,{children:\"æœ‰çš„å›¾å±‚çš„å­˜åœ¨ä¸æ˜¯ç»˜åˆ¶ï¼Œè€Œæ˜¯å›¾å±‚æ•ˆæœï¼Œæ¯”å¦‚å‰ªè´´è’™ç‰ˆã€æ»¤é•œã€‚\"}),\"\\n\",e(l.img,{src:\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342858.webp\",alt:\"layer tree\"}),\"\\n\",i(l.p,{children:[\"å›¾å±‚çš„åˆæˆä½äº CC (Chronium compositor) namspace, æ‰€ä»¥ä»£ç é‡Œæœ‰å¾ˆå¤š \",e(l.code,{children:\"cc::layer\"}),\"ã€‚\"]}),\"\\n\",e(l.p,{children:\"å¦‚æœä¸€ä¸ª Layout Object æ²¡æœ‰æŒ‡å®šå•ç‹¬çš„ layer(æ¯”å¦‚æ²¡æœ‰ will-change å±æ€§)ï¼Œå°±ä¼šè¢«ç»˜åˆ¶åˆ°çˆ¶ layer çš„å›¾å±‚ã€‚\"}),\"\\n\",e(l.p,{children:\"Paint Layer æ˜¯è¦è¢«åˆ†åˆ° CC LayerTree çš„ã€‚è¿™å°±æ˜¯CSS/å±‚å ä¸Šä¸‹æ–‡ä¸CSS/å›¾å±‚ä¹‹é—´çš„å…³ç³»ã€‚\"}),\"\\n\",e(l.img,{src:\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342859.webp\",alt:\"image.png\"}),\"\\n\",e(l.img,{src:\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342860.webp\",alt:\"paint layer map\"}),\"\\n\",e(l.h3,{id:\"33-compositioning-update\",children:\"3.3 compositioning update\"}),\"\\n\",e(l.p,{children:\"åœ¨ä¸Šä¸€ç« çš„æµç¨‹ä¸­ï¼Œæ²¡æœ‰è®²åˆ°åˆæˆè¿™æ­¥ï¼Œå®é™…è¦åŠ ä¸Šã€‚å› ä¸ºåˆæˆä¸æ˜¯å¿…é¡»çš„ï¼Œä½†åˆæˆæ­¥éª¤èƒ½ä¼˜åŒ–æ¸²æŸ“ã€‚\"}),\"\\n\",e(l.img,{src:\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342861.webp\",alt:\"æ›´æ–°åˆæˆ\"}),\"\\n\",e(l.p,{children:\"æœªæ¥ï¼Œåˆ›å»ºå›¾å±‚çš„å·¥ä½œä¼šæ”¾åˆ° paint ä¹‹åï¼ˆslimming paintï¼‰\"}),\"\\n\",e(l.img,{src:\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342862.webp\",alt:\"commit\"}),\"\\n\",e(l.p,{children:e(l.strong,{children:\"commit\"})}),\"\\n\",e(l.p,{children:\"æäº¤ä¸€æ¬¡åˆæˆã€‚è¿™é‡Œåˆæˆçº¿ç¨‹ä¸ä¸»çº¿ç¨‹éƒ½å­˜åœ¨ layer treeï¼Œéœ€è¦åŒæ­¥åˆæˆçº¿ç¨‹ä¸ä¸»çº¿ç¨‹çš„çŠ¶æ€ã€‚\"}),\"\\n\",e(l.h3,{id:\"34-tilling\",children:\"3.4 Tilling\"}),\"\\n\",e(l.p,{children:\"åœ¨ rastering é˜¶æ®µï¼ŒæŠŠ CC layer åˆ†å—æˆ tileã€‚\"}),\"\\n\",i(l.p,{children:[e(l.strong,{children:\"tile æ˜¯ raster çš„æœ€å°å•ä½\"}),\"ï¼Œåœ¨ä¸“é—¨çš„ \",e(l.strong,{children:\"raster çº¿ç¨‹\"}),\" è¿›è¡Œæ …æ ¼åŒ–ã€‚\"]}),\"\\n\",i(l.p,{children:[\"åˆæˆçº¿ç¨‹æœ‰ä¸€ä¸ª \",e(l.strong,{children:\"tile manager\"}),\" å®‰æ’ tile ä¼˜å…ˆçº§ã€‚\"]}),\"\\n\",e(l.p,{children:\"ä¸åŒåˆ†è¾¨ç‡çš„ tile ç­–ç•¥æ˜¯ä¸åŒçš„ã€‚\"}),\"\\n\",e(l.h3,{id:\"35-drawing\",children:\"3.5 Drawing\"}),\"\\n\",i(l.p,{children:[\"ä¸åŒ tile åˆæˆä¸º \",e(l.strong,{children:\"Quad\"}),\"ã€‚Quad å¼•ç”¨å†…å­˜ä¸­çš„ raster outputï¼Œå°è£…åœ¨åˆæˆè¿›ç¨‹ä¸­ï¼Œå†æäº¤åˆ°æµè§ˆå™¨è¿›ç¨‹ã€‚æµè§ˆå™¨åŠ¨ç”»å¸§çš„\",e(l.strong,{children:\"å¸§\"}),\"æ¦‚å¿µå°±æ˜¯ Quadã€‚\"]}),\"\\n\",e(l.img,{src:\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342863.webp\",alt:\"Quad\"}),\"\\n\",i(l.p,{children:[\"ä¸åŒ commit æœ‰å…ˆåé¡ºåºï¼Œéœ€è¦ä» pending \",e(l.strong,{children:\"æ¿€æ´»\"}),\"å†ç»˜åˆ¶ã€‚\"]}),\"\\n\",e(l.h3,{id:\"36-display\",children:\"3.6 Display\"}),\"\\n\",e(l.p,{children:\"æµè§ˆå™¨è¿›ç¨‹å°† Quad å±•ç¤ºåˆ°å±å¹•ä¸Šçš„è¿‡ç¨‹ã€‚ä½äº Viz ç»„ä»¶ä¸­ï¼Œè°ƒç”¨ OpenGL ç»˜åˆ¶ GPU è¿›ç¨‹ä¸­çš„ Quad èµ„æºï¼Œå’Œ rastering çš„ GL call ä¸€æ ·ã€‚\"}),\"\\n\",e(l.p,{children:\"å¤§éƒ¨åˆ†å¹³å°çš„æ˜¾ç¤ºåˆæˆè¾“å‡ºæ˜¯åŒå€ç¼“å†²ï¼ˆæœ‰è¿‡æ¸¸æˆç”»é¢æ’•è£‚ç»éªŒçš„åº”è¯¥å¯¹è¿™æœ‰æ¦‚å¿µï¼‰ï¼Œquad æ˜¯åœ¨åå°ç¼“å†²å™¨ï¼ˆGPUçš„è¿˜æ˜¯Vizï¼Ÿï¼‰ä¸­ç»˜åˆ¶çš„ï¼Œç”¨ swap å‘½ä»¤è®©åå°çš„ quad åˆ°å‰å°å±•ç¤ºã€‚\"}),\"\\n\",e(l.h2,{id:\"4-æ€»ç»“\",children:\"4. æ€»ç»“\"}),\"\\n\",e(l.p,{children:\"Blink å¼•æ“ä¸¥æ ¼æ‰§è¡Œäº†ä¸»çº¿ç¨‹çš„æ­¥éª¤ã€‚ä½†ç”±äºè¦å®ç° Web å¹³å°åŒ–ï¼Œæ˜¯æœ‰ä¸€äº›åˆæˆçº¿ç¨‹çš„æƒé™çš„ã€‚\"}),\"\\n\",e(l.img,{src:\"https://cdn.jsdelivr.net/gh/NamiLing/upic/picgo/202402292342864.webp\",alt:\"æ€»ç»“\"}),\"\\n\",e(l.h2,{id:\"å…¶ä»–\",children:\"å…¶ä»–\"}),\"\\n\",e(l.p,{children:\"æ¸²æŸ“å™¨å’Œæµè§ˆå™¨éƒ½ç”¨åˆ°äº† GPUï¼Œéƒ½æœ‰å‘GPUè¿›ç¨‹çš„IPCé€šé“ã€‚\"}),\"\\n\",e(l.p,{children:\"å¦‚æœæƒ³è®©æ»šåŠ¨çš„äº¤äº’äº§ç”Ÿçš„åŠ¨ç”»ä¸åœ¨ä¸»çº¿ç¨‹è€Œåœ¨åˆæˆçº¿ç¨‹æ‰§è¡Œï¼Œéœ€è¦å¼ºåˆ¶ will-transform åˆ†å±‚\"})]})}return{default:function(n={}){const{wrapper:i}=n.components||{};return i?e(i,{...n,children:e(_createMdxContent,{...n})}):_createMdxContent(n)}};","toc",[31,37,49,77,81],{"_7":32,"_33":34,"_35":36},"1. Web content","url","#1-web-content","items",[],{"_7":38,"_33":39,"_35":40},"2. æ¸²æŸ“","#2-æ¸²æŸ“",[41,45],{"_7":42,"_33":43,"_35":44},"2.1 æ¸²æŸ“ç›®æ ‡","#21-æ¸²æŸ“ç›®æ ‡",[],{"_7":46,"_33":47,"_35":48},"2.2 åŸºæœ¬æ¸²æŸ“æµç¨‹","#22-åŸºæœ¬æ¸²æŸ“æµç¨‹",[],{"_7":50,"_33":51,"_35":52},"3. å›¾å±‚åˆæˆ","#3-å›¾å±‚åˆæˆ",[53,57,61,65,69,73],{"_7":54,"_33":55,"_35":56},"3.1 å¸§ä¸åŠ¨ç”»","#31-å¸§ä¸åŠ¨ç”»",[],{"_7":58,"_33":59,"_35":60},"3.2 åˆæˆçº¿ç¨‹","#32-åˆæˆçº¿ç¨‹",[],{"_7":62,"_33":63,"_35":64},"3.3 compositioning update","#33-compositioning-update",[],{"_7":66,"_33":67,"_35":68},"3.4 Tilling","#34-tilling",[],{"_7":70,"_33":71,"_35":72},"3.5 Drawing","#35-drawing",[],{"_7":74,"_33":75,"_35":76},"3.6 Display","#36-display",[],{"_7":78,"_33":79,"_35":80},"4. æ€»ç»“","#4-æ€»ç»“",[],{"_7":82,"_33":83,"_35":84},"å…¶ä»–","#å…¶ä»–",[],"tags",[87],"å‰ç«¯","categories","å­¦ä¹ ","keywords",[92],"æµè§ˆå™¨ï¼Œæ¸²æŸ“ï¼Œå›æµï¼Œé‡ç»˜","permalink","/posts/2024-02-29_åƒç´ çš„ä¸€ç”Ÿ","prevPost",{"_7":97,"_9":98},"Windows å‘½ä»¤è¡Œç›¸å…³é…ç½®ä¹‹ msys2+zsh+zi","windows-zsh-conf","nextPost",{"_7":101,"_9":101},"ç™½å«–æ€ªçš„ç»éªŒ"]
