[{"_1":2},"routes/posts.$slug",{"_3":4},"data",{"_5":6,"_50":51,"_54":55},"post",{"_7":8,"_9":10,"_11":12,"_13":8,"_14":15,"_16":17,"_22":23,"_24":25,"_26":27,"_28":29,"_36":37,"_39":40,"_41":42,"_48":49},"title","Github hosts 更新脚本(MAC)","slug","github-hosttools","date","2021-08-06T16:00:00.000Z","description","draft",false,"metadata",{"_18":19,"_20":21},"readingTime",3,"wordCount",764,"excerpt","此工具已更新至 Github。\n\n安装卸载脚本\n自动定时运行\n平时不占内存，运行时几乎不占内存\n\n原文如下：\n\n最近 Github 墙得越来越厉害了。写了个 Shell 工具，连不上的时候就更新一下。可以配合 Alfred 使用。\n使用的 host 源来自这里。其实用 SwitchHosts 更新也行，但我真的讨厌 Electron App……麻了，现在听个歌写个笔记 1个多 G 的内存就没了。\n也可以用写成定时程序后台运行，加个 LaunchDaemon 文件就行，但，我不会打包 Mac App……文件这么散着分","content_html","<p>此工具已更新至 <a href=\"https://github.com/Sansui233/mac-githubhosts-autoupdate\">Github</a>。</p>\n<ul>\n<li>安装卸载脚本</li>\n<li>自动定时运行</li>\n<li>平时不占内存，运行时几乎不占内存</li>\n</ul>\n<p>原文如下：</p>\n<hr>\n<p>最近 Github 墙得越来越厉害了。写了个 Shell 工具，连不上的时候就更新一下。可以配合 Alfred 使用。</p>\n<p>使用的 host 源来自<a href=\"https://github.com/JohyC/Hosts\">这里</a>。其实用 SwitchHosts 更新也行，但我真的讨厌 Electron App……麻了，现在听个歌写个笔记 1个多 G 的内存就没了。</p>\n<p>也可以用写成定时程序后台运行，加个 LaunchDaemon 文件就行，但，我不会打包 Mac App……文件这么散着分发也太 emmm，而且别人装起来也麻烦……</p>\n<p>麻烦归麻烦还是要写的……</p>\n<p>文件和说明已经上传到 <a href=\"https://github.com/Sansui233/mac-githubhosts-autoupdate\">Github</a>。</p>\n<ul>\n<li>下面这个文件保存取名为 <code>hoststool</code></li>\n<li>赋予执行权限 <code>chmod +x hoststool</code>。如果为了执行起来方便，可以放进环境变量的目录（比如/usr/local/bin）</li>\n<li>然后就可以使用 <code>hoststool -u</code> 更新 host 了，运行结果会发系统通知。之前可以自己看看 hosts 内容有没有问题。这是有几率失败的，因为用的 gittee 的 host 源，经常会提示文件疑似违规……这种时候再请求一次就好了，第二次就不违规了。我也不知道为什么。</li>\n</ul>\n<p>（定时任务的部分在后面）</p>\n<pre><code class=\"language-shell\">#!/bin/bash\r\nshowHelp() {\r\n\techo \"-u [source_url]\tupdate github hosts. You can specify a custom host source\"\r\n\techo \"-b\tbackup /etc/hosts to /etc/hosts.backup\"\r\n\techo \"-r\trecover hosts.backup to hosts\"\r\n\techo \"-f\tlist files in /etc which contains \\\"hosts\\\"\"\r\n}\r\n\r\n\r\n# ====== Main =====\r\nif [ $# -eq 0 ]; then showHelp;exit 0;fi\r\n\r\n# CONF\r\ndownload_dir=\"$HOME/etc/hoststool\"\r\ngithub_hosts=\"https://gitee.com/yuchi-shentang/GithubHosts/raw/main/hosts.txt\"\r\nif [ ! -d \"$download_dir\" ]; then\r\n  mkdir -p $download_dir\r\nfi\r\n\r\ncase \"$1\" in\r\n\t-f)\r\n\t\tls /etc | grep hosts;\r\n\t\texit 0;;\r\n\t-b) \r\n\t\tsudo cp /etc/hosts /etc/hosts.backup;\r\n\t\texit 0;;\r\n\t-r) \r\n\t\tsudo cp /etc/hosts.backup /etc/hosts;\r\n\t\texit 0;;\r\n\t-u) \r\n\t\tif [ $2 ]; then github_hosts=$2;fi\r\n\t\tcurl -o ${download_dir}/hosts ${github_hosts};\r\n\t\tif [ $? -ne 0 ]; then\r\n\t\t\techo \"[ERROR] 获取远程 host 出错，请尝试更换 source 或检查 download_dir 读写权限\"\r\n\t\t\tosascript -e 'display notification \"获取远程 host 出错，请尝试更换 source\" with title \"hoststool\"'\r\n\t\t\texit 1\r\n\t\tfi\r\n\t\t\r\n\t\t# Validate host content length\r\n\t\tlines=$(awk '{print NR}' ${download_dir}/hosts | tail -n1)\r\n\t\tif [ $lines -lt 10 ]\r\n\t\tthen\r\n\t\t\techo '[ERRO] 远程 Github Hosts 无效（Gitee源不稳定），通常重试即可'\r\n\t\t\tosascript -e 'display notification \"远程 Github Hosts 无效（Gitee源不稳定），通常重试即可\" with title \"hoststool\"'\r\n\t\t\trm ${download_dir}/hosts\r\n\t\t\texit 1\r\n\t\tfi\r\n\r\n\t\t# Remove old content\r\n\t\tbegin=$(sed -n  '/# ==== Github Start ====/=' /etc/hosts | awk 'NR==1{print}')\r\n\t\tend=$(sed -n  '/# ==== Github End ====/=' /etc/hosts | awk 'END{print}')\r\n\t\techo \"Removing old hosts. Start at line \\\"${begin}\\\", End at line \\\"${end}\\\"\"\r\n\t\tcat /etc/hosts | sed \"${begin},${end}d\" > ${download_dir}/hosts.tmp\r\n\t\tif [ $? -ne 0 ]; then\r\n\t\t\t## Trip Failed\r\n\t\t\techo \"[INFO] 当前 Host中 无旧的 Github Host 标记可清除\"\r\n\t\telse\r\n\t\t\t## Trip Succeed, move result\r\n\t\t\techo \"[INFO] 清除旧的 Github Host 标记\"\r\n\t\t\tsudo cp /etc/hosts /etc/hosts.backup &#x26;&#x26; sudo cp ${download_dir}/hosts.tmp /etc/hosts;\r\n\t\tfi\r\n\r\n\t\t# Add new hosts\r\n\t\tsudo bash -c \"echo '# ==== Github Start ====' >> /etc/hosts\" # Add github host\r\n\t\tif [ $? -ne 0 ]; then\r\n\t\t\techo \"[ERROR] 无root权限，请尝试运行脚本手动输入密码\"\r\n\t\t\tosascript -e 'display notification \"无root权限，请尝试运行脚本手动输入密码\" with title \"hoststool\"'\r\n\t\t\trm ${download_dir}/hosts.tmp\r\n\t\t\trm ${download_dir}/hosts\r\n\t\t\texit 1;\r\n\t\tfi\r\n\t\tsudo bash -c \"echo \\\"# Updated at $(date)\\\" >> /etc/hosts\" # Add github host\r\n\t\tsudo bash -c \"cat ${download_dir}/hosts >> /etc/hosts\";\r\n\t\tsudo bash -c \"echo '# ==== Github End ====' >> /etc/hosts\"\r\n\t\trm ${download_dir}/hosts.tmp\r\n\t\trm ${download_dir}/hosts\r\n\r\n\t\techo \"[INFO] Github Hosts 块更新于 $(date)\"\r\n\t\tosascript -e 'display notification \"Github Hosts 已更新\" with title \"hoststool\"'\r\n\t\texit 0;;\r\n\t-h|--help)\r\n\t\tshowHelp;\r\n\t\texit 0;;\r\n\t*)\r\n\t\techo \"Unknown command\";\r\n\t\tshowHelp;\r\n\t\texit 1;;\r\nesac\n</code></pre>\n<h2>定时</h2>\n<p>保存以下文件为 <code>hoststool.plist</code>。</p>\n<pre><code class=\"language-plist\">&#x3C;?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n&#x3C;!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\">\r\n&#x3C;plist version=\"1.0\">\r\n&#x3C;dict>\r\n&#x3C;key>Label&#x3C;/key>&#x3C;string>hoststool&#x3C;/string>\r\n\r\n&#x3C;key>ProgramArguments&#x3C;/key>\r\n&#x3C;array>\r\n  &#x3C;string>/usr/local/bin/hoststool&#x3C;/string>\r\n  &#x3C;string>-u&#x3C;/string>\r\n&#x3C;/array>\r\n\r\n&#x3C;key>RunAtLoad&#x3C;/key>\r\n&#x3C;true/>\r\n\r\n&#x3C;key>StartInterval&#x3C;/key>\r\n&#x3C;integer>3600&#x3C;/integer>\r\n\r\n&#x3C;key>StandardOutPath&#x3C;/key>\r\n&#x3C;string>/Library/Logs/hoststool.log&#x3C;/string>\r\n\r\n&#x3C;key>StandardErrorPath&#x3C;/key>\r\n&#x3C;string>/Library/Logs/hoststool.log&#x3C;/string>\r\n\r\n&#x3C;/dict>\r\n&#x3C;/plist>\n</code></pre>\n<p>把 <code>/usr/local/bin</code> ，改成你存放脚本的路径。</p>\n<p>时间间隔为 3600 秒，可以自己修改。</p>\n<p>然后执行</p>\n<pre><code class=\"language-shell\">$ sudo cp hoststool.plist /Library/LaunchDaemons\r\n$ sudo chown root:admin /Library/LaunchDaemons/hoststool.plist\r\n$ sudo launchctl load -w /Library/LaunchDaemons/hoststool.plist\n</code></pre>\n<p>执行完就会立刻运行一次脚本。由于定时任务是 root 用户不是个人用户，不会有通知，可以去 Console 看 log。</p>","content_jsx","const{Fragment:s,jsx:n,jsxs:a}=arguments[0];function _createMdxContent(t){const e={a:\"a\",code:\"code\",h2:\"h2\",hr:\"hr\",li:\"li\",p:\"p\",pre:\"pre\",span:\"span\",ul:\"ul\",...t.components};return a(s,{children:[a(e.p,{children:[\"此工具已更新至 \",n(e.a,{href:\"https://github.com/Sansui233/mac-githubhosts-autoupdate\",children:\"Github\"}),\"。\"]}),\"\\n\",a(e.ul,{children:[\"\\n\",n(e.li,{children:\"安装卸载脚本\"}),\"\\n\",n(e.li,{children:\"自动定时运行\"}),\"\\n\",n(e.li,{children:\"平时不占内存，运行时几乎不占内存\"}),\"\\n\"]}),\"\\n\",n(e.p,{children:\"原文如下：\"}),\"\\n\",n(e.hr,{}),\"\\n\",n(e.p,{children:\"最近 Github 墙得越来越厉害了。写了个 Shell 工具，连不上的时候就更新一下。可以配合 Alfred 使用。\"}),\"\\n\",a(e.p,{children:[\"使用的 host 源来自\",n(e.a,{href:\"https://github.com/JohyC/Hosts\",children:\"这里\"}),\"。其实用 SwitchHosts 更新也行，但我真的讨厌 Electron App……麻了，现在听个歌写个笔记 1个多 G 的内存就没了。\"]}),\"\\n\",n(e.p,{children:\"也可以用写成定时程序后台运行，加个 LaunchDaemon 文件就行，但，我不会打包 Mac App……文件这么散着分发也太 emmm，而且别人装起来也麻烦……\"}),\"\\n\",n(e.p,{children:\"麻烦归麻烦还是要写的……\"}),\"\\n\",a(e.p,{children:[\"文件和说明已经上传到 \",n(e.a,{href:\"https://github.com/Sansui233/mac-githubhosts-autoupdate\",children:\"Github\"}),\"。\"]}),\"\\n\",a(e.ul,{children:[\"\\n\",a(e.li,{children:[\"下面这个文件保存取名为 \",n(e.code,{children:\"hoststool\"})]}),\"\\n\",a(e.li,{children:[\"赋予执行权限 \",n(e.code,{children:\"chmod +x hoststool\"}),\"。如果为了执行起来方便，可以放进环境变量的目录（比如/usr/local/bin）\"]}),\"\\n\",a(e.li,{children:[\"然后就可以使用 \",n(e.code,{children:\"hoststool -u\"}),\" 更新 host 了，运行结果会发系统通知。之前可以自己看看 hosts 内容有没有问题。这是有几率失败的，因为用的 gittee 的 host 源，经常会提示文件疑似违规……这种时候再请求一次就好了，第二次就不违规了。我也不知道为什么。\"]}),\"\\n\"]}),\"\\n\",n(e.p,{children:\"（定时任务的部分在后面）\"}),\"\\n\",n(e.pre,{children:a(e.code,{className:\"hljs language-shell\",children:[n(e.span,{className:\"hljs-meta prompt_\",children:\"#\"}),n(e.span,{className:\"bash\",children:\"!/bin/bash\"}),'\\r\\nshowHelp() {\\r\\n\\techo \"-u [source_url]\\tupdate github hosts. You can specify a custom host source\"\\r\\n\\techo \"-b\\tbackup /etc/hosts to /etc/hosts.backup\"\\r\\n\\techo \"-r\\trecover hosts.backup to hosts\"\\r\\n\\techo \"-f\\tlist files in /etc which contains \\\\\"hosts\\\\\"\"\\r\\n}\\r\\n\\r',n(e.span,{className:\"hljs-meta prompt_\",children:\"\\n\\r\\n# \"}),n(e.span,{className:\"bash\",children:\"====== Main =====\"}),\"\\r\\nif [ $# -eq 0 ]; then showHelp;exit 0;fi\\r\",n(e.span,{className:\"hljs-meta prompt_\",children:\"\\n\\r\\n# \"}),n(e.span,{className:\"bash\",children:\"CONF\"}),'\\r\\ndownload_dir=\"$HOME/etc/hoststool\"\\r\\ngithub_hosts=\"https://gitee.com/yuchi-shentang/GithubHosts/raw/main/hosts.txt\"\\r\\nif [ ! -d \"$download_dir\" ]; then\\r\\n  mkdir -p $download_dir\\r\\nfi\\r\\n\\r\\ncase \"$1\" in\\r\\n\\t-f)\\r\\n\\t\\tls /etc | grep hosts;\\r\\n\\t\\texit 0;;\\r\\n\\t-b) \\r\\n\\t\\tsudo cp /etc/hosts /etc/hosts.backup;\\r\\n\\t\\texit 0;;\\r\\n\\t-r) \\r\\n\\t\\tsudo cp /etc/hosts.backup /etc/hosts;\\r\\n\\t\\texit 0;;\\r\\n\\t-u) \\r\\n\\t\\tif [ $2 ]; then github_hosts=$2;fi\\r\\n\\t\\tcurl -o ${download_dir}/hosts ${github_hosts};\\r\\n\\t\\tif [ $? -ne 0 ]; then\\r\\n\\t\\t\\techo \"[ERROR] 获取远程 host 出错，请尝试更换 source 或检查 download_dir 读写权限\"\\r\\n\\t\\t\\tosascript -e \\'display notification \"获取远程 host 出错，请尝试更换 source\" with title \"hoststool\"\\'\\r\\n\\t\\t\\texit 1\\r\\n\\t\\tfi\\r\\n\\t\\t\\r',n(e.span,{className:\"hljs-meta prompt_\",children:\"\\n\\t\\t# \"}),n(e.span,{className:\"bash\",children:\"Validate host content length\"}),\"\\r\\n\\t\\tlines=$(awk '{print NR}' ${download_dir}/hosts | tail -n1)\\r\\n\\t\\tif [ $lines -lt 10 ]\\r\\n\\t\\tthen\\r\\n\\t\\t\\techo '[ERRO] 远程 Github Hosts 无效（Gitee源不稳定），通常重试即可'\\r\\n\\t\\t\\tosascript -e 'display notification \\\"远程 Github Hosts 无效（Gitee源不稳定），通常重试即可\\\" with title \\\"hoststool\\\"'\\r\\n\\t\\t\\trm ${download_dir}/hosts\\r\\n\\t\\t\\texit 1\\r\\n\\t\\tfi\\r\\n\\r\",n(e.span,{className:\"hljs-meta prompt_\",children:\"\\n\\t\\t# \"}),n(e.span,{className:\"bash\",children:\"Remove old content\"}),\"\\r\\n\\t\\tbegin=$(sed -n  '/# ==== Github Start ====/=' /etc/hosts | awk 'NR==1{print}')\\r\\n\\t\\tend=$(sed -n  '/# ==== Github End ====/=' /etc/hosts | awk 'END{print}')\\r\\n\\t\\techo \\\"Removing old hosts. Start at line \\\\\\\"${begin}\\\\\\\", End at line \\\\\\\"${end}\\\\\\\"\\\"\\r\\n\\t\\tcat /etc/hosts | sed \\\"${begin},${end}d\\\" > ${download_dir}/hosts.tmp\\r\\n\\t\\tif [ $? -ne 0 ]; then\\r\\n\",n(e.span,{className:\"hljs-meta prompt_\",children:\"\\t\\t\\t#\"}),n(e.span,{className:\"bash\",children:n(e.span,{className:\"hljs-comment\",children:\"# Trip Failed\"})}),'\\r\\n\\t\\t\\techo \"[INFO] 当前 Host中 无旧的 Github Host 标记可清除\"\\r\\n\\t\\telse\\r\\n',n(e.span,{className:\"hljs-meta prompt_\",children:\"\\t\\t\\t#\"}),n(e.span,{className:\"bash\",children:n(e.span,{className:\"hljs-comment\",children:\"# Trip Succeed, move result\"})}),'\\r\\n\\t\\t\\techo \"[INFO] 清除旧的 Github Host 标记\"\\r\\n\\t\\t\\tsudo cp /etc/hosts /etc/hosts.backup && sudo cp ${download_dir}/hosts.tmp /etc/hosts;\\r\\n\\t\\tfi\\r\\n\\r',n(e.span,{className:\"hljs-meta prompt_\",children:\"\\n\\t\\t# \"}),n(e.span,{className:\"bash\",children:\"Add new hosts\"}),'\\r\\n\\t\\tsudo bash -c \"echo \\'# ==== Github Start ====\\' >> /etc/hosts\" # Add github host\\r\\n\\t\\tif [ $? -ne 0 ]; then\\r\\n\\t\\t\\techo \"[ERROR] 无root权限，请尝试运行脚本手动输入密码\"\\r\\n\\t\\t\\tosascript -e \\'display notification \"无root权限，请尝试运行脚本手动输入密码\" with title \"hoststool\"\\'\\r\\n\\t\\t\\trm ${download_dir}/hosts.tmp\\r\\n\\t\\t\\trm ${download_dir}/hosts\\r\\n\\t\\t\\texit 1;\\r\\n\\t\\tfi\\r\\n\\t\\tsudo bash -c \"echo \\\\\"# Updated at $(date)\\\\\" >> /etc/hosts\" # Add github host\\r\\n\\t\\tsudo bash -c \"cat ${download_dir}/hosts >> /etc/hosts\";\\r\\n\\t\\tsudo bash -c \"echo \\'# ==== Github End ====\\' >> /etc/hosts\"\\r\\n\\t\\trm ${download_dir}/hosts.tmp\\r\\n\\t\\trm ${download_dir}/hosts\\r\\n\\r\\n\\t\\techo \"[INFO] Github Hosts 块更新于 $(date)\"\\r\\n\\t\\tosascript -e \\'display notification \"Github Hosts 已更新\" with title \"hoststool\"\\'\\r\\n\\t\\texit 0;;\\r\\n\\t-h|--help)\\r\\n\\t\\tshowHelp;\\r\\n\\t\\texit 0;;\\r\\n\\t*)\\r\\n\\t\\techo \"Unknown command\";\\r\\n\\t\\tshowHelp;\\r\\n\\t\\texit 1;;\\r\\nesac\\n']})}),\"\\n\",n(e.h2,{id:\"定时\",children:\"定时\"}),\"\\n\",a(e.p,{children:[\"保存以下文件为 \",n(e.code,{children:\"hoststool.plist\"}),\"。\"]}),\"\\n\",n(e.pre,{children:a(e.code,{className:\"hljs language-plist\",children:[a(e.span,{className:\"hljs-meta\",children:[\"<?xml version=\",n(e.span,{className:\"hljs-string\",children:'\"1.0\"'}),\" encoding=\",n(e.span,{className:\"hljs-string\",children:'\"UTF-8\"'}),\"?>\"]}),\"\\r\\n\",a(e.span,{className:\"hljs-meta\",children:[\"<!DOCTYPE \",n(e.span,{className:\"hljs-keyword\",children:\"plist\"}),\" \",n(e.span,{className:\"hljs-keyword\",children:\"PUBLIC\"}),\" \",n(e.span,{className:\"hljs-string\",children:'\"-//Apple//DTD PLIST 1.0//EN\"'}),\" \",n(e.span,{className:\"hljs-string\",children:'\"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"'}),\">\"]}),\"\\r\\n\",a(e.span,{className:\"hljs-tag\",children:[\"<\",n(e.span,{className:\"hljs-name\",children:\"plist\"}),\" \",n(e.span,{className:\"hljs-attr\",children:\"version\"}),\"=\",n(e.span,{className:\"hljs-string\",children:'\"1.0\"'}),\">\"]}),\"\\r\\n\",a(e.span,{className:\"hljs-tag\",children:[\"<\",n(e.span,{className:\"hljs-name\",children:\"dict\"}),\">\"]}),\"\\r\\n\",a(e.span,{className:\"hljs-tag\",children:[\"<\",n(e.span,{className:\"hljs-name\",children:\"key\"}),\">\"]}),\"Label\",a(e.span,{className:\"hljs-tag\",children:[\"</\",n(e.span,{className:\"hljs-name\",children:\"key\"}),\">\"]}),a(e.span,{className:\"hljs-tag\",children:[\"<\",n(e.span,{className:\"hljs-name\",children:\"string\"}),\">\"]}),\"hoststool\",a(e.span,{className:\"hljs-tag\",children:[\"</\",n(e.span,{className:\"hljs-name\",children:\"string\"}),\">\"]}),\"\\r\\n\\r\\n\",a(e.span,{className:\"hljs-tag\",children:[\"<\",n(e.span,{className:\"hljs-name\",children:\"key\"}),\">\"]}),\"ProgramArguments\",a(e.span,{className:\"hljs-tag\",children:[\"</\",n(e.span,{className:\"hljs-name\",children:\"key\"}),\">\"]}),\"\\r\\n\",a(e.span,{className:\"hljs-tag\",children:[\"<\",n(e.span,{className:\"hljs-name\",children:\"array\"}),\">\"]}),\"\\r\\n  \",a(e.span,{className:\"hljs-tag\",children:[\"<\",n(e.span,{className:\"hljs-name\",children:\"string\"}),\">\"]}),\"/usr/local/bin/hoststool\",a(e.span,{className:\"hljs-tag\",children:[\"</\",n(e.span,{className:\"hljs-name\",children:\"string\"}),\">\"]}),\"\\r\\n  \",a(e.span,{className:\"hljs-tag\",children:[\"<\",n(e.span,{className:\"hljs-name\",children:\"string\"}),\">\"]}),\"-u\",a(e.span,{className:\"hljs-tag\",children:[\"</\",n(e.span,{className:\"hljs-name\",children:\"string\"}),\">\"]}),\"\\r\\n\",a(e.span,{className:\"hljs-tag\",children:[\"</\",n(e.span,{className:\"hljs-name\",children:\"array\"}),\">\"]}),\"\\r\\n\\r\\n\",a(e.span,{className:\"hljs-tag\",children:[\"<\",n(e.span,{className:\"hljs-name\",children:\"key\"}),\">\"]}),\"RunAtLoad\",a(e.span,{className:\"hljs-tag\",children:[\"</\",n(e.span,{className:\"hljs-name\",children:\"key\"}),\">\"]}),\"\\r\\n\",a(e.span,{className:\"hljs-tag\",children:[\"<\",n(e.span,{className:\"hljs-name\",children:\"true\"}),\"/>\"]}),\"\\r\\n\\r\\n\",a(e.span,{className:\"hljs-tag\",children:[\"<\",n(e.span,{className:\"hljs-name\",children:\"key\"}),\">\"]}),\"StartInterval\",a(e.span,{className:\"hljs-tag\",children:[\"</\",n(e.span,{className:\"hljs-name\",children:\"key\"}),\">\"]}),\"\\r\\n\",a(e.span,{className:\"hljs-tag\",children:[\"<\",n(e.span,{className:\"hljs-name\",children:\"integer\"}),\">\"]}),\"3600\",a(e.span,{className:\"hljs-tag\",children:[\"</\",n(e.span,{className:\"hljs-name\",children:\"integer\"}),\">\"]}),\"\\r\\n\\r\\n\",a(e.span,{className:\"hljs-tag\",children:[\"<\",n(e.span,{className:\"hljs-name\",children:\"key\"}),\">\"]}),\"StandardOutPath\",a(e.span,{className:\"hljs-tag\",children:[\"</\",n(e.span,{className:\"hljs-name\",children:\"key\"}),\">\"]}),\"\\r\\n\",a(e.span,{className:\"hljs-tag\",children:[\"<\",n(e.span,{className:\"hljs-name\",children:\"string\"}),\">\"]}),\"/Library/Logs/hoststool.log\",a(e.span,{className:\"hljs-tag\",children:[\"</\",n(e.span,{className:\"hljs-name\",children:\"string\"}),\">\"]}),\"\\r\\n\\r\\n\",a(e.span,{className:\"hljs-tag\",children:[\"<\",n(e.span,{className:\"hljs-name\",children:\"key\"}),\">\"]}),\"StandardErrorPath\",a(e.span,{className:\"hljs-tag\",children:[\"</\",n(e.span,{className:\"hljs-name\",children:\"key\"}),\">\"]}),\"\\r\\n\",a(e.span,{className:\"hljs-tag\",children:[\"<\",n(e.span,{className:\"hljs-name\",children:\"string\"}),\">\"]}),\"/Library/Logs/hoststool.log\",a(e.span,{className:\"hljs-tag\",children:[\"</\",n(e.span,{className:\"hljs-name\",children:\"string\"}),\">\"]}),\"\\r\\n\\r\\n\",a(e.span,{className:\"hljs-tag\",children:[\"</\",n(e.span,{className:\"hljs-name\",children:\"dict\"}),\">\"]}),\"\\r\\n\",a(e.span,{className:\"hljs-tag\",children:[\"</\",n(e.span,{className:\"hljs-name\",children:\"plist\"}),\">\"]}),\"\\n\"]})}),\"\\n\",a(e.p,{children:[\"把 \",n(e.code,{children:\"/usr/local/bin\"}),\" ，改成你存放脚本的路径。\"]}),\"\\n\",n(e.p,{children:\"时间间隔为 3600 秒，可以自己修改。\"}),\"\\n\",n(e.p,{children:\"然后执行\"}),\"\\n\",n(e.pre,{children:a(e.code,{className:\"hljs language-shell\",children:[n(e.span,{className:\"hljs-meta prompt_\",children:\"$ \"}),a(e.span,{className:\"bash\",children:[n(e.span,{className:\"hljs-built_in\",children:\"sudo\"}),\" \",n(e.span,{className:\"hljs-built_in\",children:\"cp\"}),\" hoststool.plist /Library/LaunchDaemons\"]}),\"\\r\",n(e.span,{className:\"hljs-meta prompt_\",children:\"\\n$ \"}),a(e.span,{className:\"bash\",children:[n(e.span,{className:\"hljs-built_in\",children:\"sudo\"}),\" \",n(e.span,{className:\"hljs-built_in\",children:\"chown\"}),\" root:admin /Library/LaunchDaemons/hoststool.plist\"]}),\"\\r\",n(e.span,{className:\"hljs-meta prompt_\",children:\"\\n$ \"}),a(e.span,{className:\"bash\",children:[n(e.span,{className:\"hljs-built_in\",children:\"sudo\"}),\" launchctl load -w /Library/LaunchDaemons/hoststool.plist\"]}),\"\\n\"]})}),\"\\n\",n(e.p,{children:\"执行完就会立刻运行一次脚本。由于定时任务是 root 用户不是个人用户，不会有通知，可以去 Console 看 log。\"})]})}return{default:function(s={}){const{wrapper:a}=s.components||{};return a?n(a,{...s,children:n(_createMdxContent,{...s})}):_createMdxContent(s)}};","toc",[30],{"_7":31,"_32":33,"_34":35},"定时","url","#定时","items",[],"tags",[38],"科学上网","categories","工具","keywords",[43,44,45,46,47],"Github","hosts","更新","脚本","Mac","permalink","/posts/github-hosttools","prevPost",{"_7":52,"_9":53},"纯函数与算法","pure-function","nextPost",{"_7":56,"_9":56},"网盘目录程序比较"]
